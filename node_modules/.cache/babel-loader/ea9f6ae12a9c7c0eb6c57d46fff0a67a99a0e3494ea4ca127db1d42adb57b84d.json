{"ast":null,"code":"/**\n * turn.js 4th release\n * turnjs.com\n * turnjs.com/license.txt\n *\n * Copyright (C) 2012 Emmanuel Garcia\n * All rights reserved\n **/\n\n(function ($) {\n  'use strict';\n\n  var has3d,\n    hasRot,\n    vendor = '',\n    version = '4.1.0',\n    PI = Math.PI,\n    A90 = PI / 2,\n    isTouch = ('ontouchstart' in window),\n    mouseEvents = isTouch ? {\n      down: 'touchstart',\n      move: 'touchmove',\n      up: 'touchend',\n      over: 'touchstart',\n      out: 'touchend'\n    } : {\n      down: 'mousedown',\n      move: 'mousemove',\n      up: 'mouseup',\n      over: 'mouseover',\n      out: 'mouseout'\n    },\n    // Contansts used for each corner\n    //   | tl * tr |\n    // l | *     * | r\n    //   | bl * br |\n\n    corners = {\n      backward: ['bl', 'tl'],\n      forward: ['br', 'tr'],\n      all: ['tl', 'bl', 'tr', 'br', 'l', 'r']\n    },\n    // Display values\n\n    displays = ['single', 'double'],\n    // Direction values\n\n    directions = ['ltr', 'rtl'],\n    // Default options\n\n    turnOptions = {\n      // Enables hardware acceleration\n\n      acceleration: true,\n      // Display\n\n      display: 'double',\n      // Duration of transition in milliseconds\n\n      duration: 600,\n      // First page\n\n      page: 1,\n      // Enables gradients\n\n      gradients: true,\n      // Corners used when turning the page\n\n      turnCorners: 'bl,br',\n      // Events\n\n      when: null\n    },\n    flipOptions = {\n      // Size of the active zone of each corner\n\n      cornerSize: 100\n    },\n    // Number of pages in the DOM, minimum value: 6\n\n    pagesInDOM = 6,\n    turnMethods = {\n      // Singleton constructor\n      // $('#selector').turn([options]);\n\n      init: function (options) {\n        // Define constants\n\n        has3d = 'WebKitCSSMatrix' in window || 'MozPerspective' in document.body.style;\n        hasRot = rotationAvailable();\n        vendor = getPrefix();\n        var i,\n          that = this,\n          pageNum = 0,\n          data = this.data(),\n          ch = this.children();\n\n        // Set initial configuration\n\n        options = $.extend({\n          width: this.width(),\n          height: this.height(),\n          direction: this.attr('dir') || this.css('direction') || 'ltr'\n        }, turnOptions, options);\n        data.opts = options;\n        data.pageObjs = {};\n        data.pages = {};\n        data.pageWrap = {};\n        data.pageZoom = {};\n        data.pagePlace = {};\n        data.pageMv = [];\n        data.zoom = 1;\n        data.totalPages = options.pages || 0;\n        data.eventHandlers = {\n          touchStart: $.proxy(turnMethods._touchStart, this),\n          touchMove: $.proxy(turnMethods._touchMove, this),\n          touchEnd: $.proxy(turnMethods._touchEnd, this),\n          start: $.proxy(turnMethods._eventStart, this)\n        };\n\n        // Add event listeners\n\n        if (options.when) for (i in options.when) if (has(i, options.when)) this.bind(i, options.when[i]);\n\n        // Set the css\n\n        this.css({\n          position: 'relative',\n          width: options.width,\n          height: options.height\n        });\n\n        // Set the initial display\n\n        this.turn('display', options.display);\n\n        // Set the direction\n\n        if (options.direction !== '') this.turn('direction', options.direction);\n\n        // Prevent blue screen problems of switching to hardware acceleration mode\n        // By forcing hardware acceleration for ever\n\n        if (has3d && !isTouch && options.acceleration) this.transform(translate(0, 0, true));\n\n        // Add pages from the DOM\n\n        for (i = 0; i < ch.length; i++) {\n          if ($(ch[i]).attr('ignore') != '1') {\n            this.turn('addPage', ch[i], ++pageNum);\n          }\n        }\n\n        // Event listeners\n\n        $(this).bind(mouseEvents.down, data.eventHandlers.touchStart).bind('end', turnMethods._eventEnd).bind('pressed', turnMethods._eventPressed).bind('released', turnMethods._eventReleased).bind('flip', turnMethods._flip);\n        $(this).parent().bind('start', data.eventHandlers.start);\n        $(document).bind(mouseEvents.move, data.eventHandlers.touchMove).bind(mouseEvents.up, data.eventHandlers.touchEnd);\n\n        // Set the initial page\n\n        this.turn('page', options.page);\n\n        // This flipbook is ready\n\n        data.done = true;\n        return this;\n      },\n      // Adds a page from external data\n\n      addPage: function (element, page) {\n        var currentPage,\n          className,\n          incPages = false,\n          data = this.data(),\n          lastPage = data.totalPages + 1;\n        if (data.destroying) return false;\n\n        // Read the page number from the className of `element` - format: p[0-9]+\n\n        if (currentPage = /\\bp([0-9]+)\\b/.exec($(element).attr('class'))) page = parseInt(currentPage[1], 10);\n        if (page) {\n          if (page == lastPage) incPages = true;else if (page > lastPage) throw turnError('Page \"' + page + '\" cannot be inserted');\n        } else {\n          page = lastPage;\n          incPages = true;\n        }\n        if (page >= 1 && page <= lastPage) {\n          if (data.display == 'double') className = page % 2 ? ' odd' : ' even';else className = '';\n\n          // Stop animations\n          if (data.done) this.turn('stop');\n\n          // Move pages if it's necessary\n          if (page in data.pageObjs) turnMethods._movePages.call(this, page, 1);\n\n          // Increase the number of pages\n          if (incPages) data.totalPages = lastPage;\n\n          // Add element\n          data.pageObjs[page] = $(element).css({\n            'float': 'left'\n          }).addClass('page p' + page + className);\n          if (!hasHardPage() && data.pageObjs[page].hasClass('hard')) {\n            data.pageObjs[page].removeClass('hard');\n          }\n\n          // Add page\n          turnMethods._addPage.call(this, page);\n\n          // Remove pages out of range\n          turnMethods._removeFromDOM.call(this);\n        }\n        return this;\n      },\n      // Adds a page\n\n      _addPage: function (page) {\n        var data = this.data(),\n          element = data.pageObjs[page];\n        if (element) if (turnMethods._necessPage.call(this, page)) {\n          if (!data.pageWrap[page]) {\n            // Wrapper\n            data.pageWrap[page] = $('<div/>', {\n              'class': 'page-wrapper',\n              page: page,\n              css: {\n                position: 'absolute',\n                overflow: 'hidden'\n              }\n            });\n\n            // Append to this flipbook\n            this.append(data.pageWrap[page]);\n            if (!data.pagePlace[page]) {\n              data.pagePlace[page] = page;\n              // Move `pageObjs[page]` to wrapper\n              data.pageObjs[page].appendTo(data.pageWrap[page]);\n            }\n\n            // Set the size of the page\n            var prop = turnMethods._pageSize.call(this, page, true);\n            element.css({\n              width: prop.width,\n              height: prop.height\n            });\n            data.pageWrap[page].css(prop);\n          }\n          if (data.pagePlace[page] == page) {\n            // If the page isn't in another place, create the flip effect\n            turnMethods._makeFlip.call(this, page);\n          }\n        } else {\n          // Place\n          data.pagePlace[page] = 0;\n\n          // Remove element from the DOM\n          if (data.pageObjs[page]) data.pageObjs[page].remove();\n        }\n      },\n      // Checks if a page is in memory\n\n      hasPage: function (page) {\n        return has(page, this.data().pageObjs);\n      },\n      // Centers the flipbook\n\n      center: function (page) {\n        var data = this.data(),\n          size = $(this).turn('size'),\n          left = 0;\n        if (!data.noCenter) {\n          if (data.display == 'double') {\n            var view = this.turn('view', page || data.tpage || data.page);\n            if (data.direction == 'ltr') {\n              if (!view[0]) left -= size.width / 4;else if (!view[1]) left += size.width / 4;\n            } else {\n              if (!view[0]) left += size.width / 4;else if (!view[1]) left -= size.width / 4;\n            }\n          }\n          $(this).css({\n            marginLeft: left\n          });\n        }\n        return this;\n      },\n      // Destroys the flipbook\n\n      destroy: function () {\n        var page,\n          flipbook = this,\n          data = this.data(),\n          events = ['end', 'first', 'flip', 'last', 'pressed', 'released', 'start', 'turning', 'turned', 'zooming', 'missing'];\n        if (trigger('destroying', this) == 'prevented') return;\n        data.destroying = true;\n        $.each(events, function (index, eventName) {\n          flipbook.unbind(eventName);\n        });\n        this.parent().unbind('start', data.eventHandlers.start);\n        $(document).unbind(mouseEvents.move, data.eventHandlers.touchMove).unbind(mouseEvents.up, data.eventHandlers.touchEnd);\n        while (data.totalPages !== 0) {\n          this.turn('removePage', data.totalPages);\n        }\n        if (data.fparent) data.fparent.remove();\n        if (data.shadow) data.shadow.remove();\n        this.removeData();\n        data = null;\n        return this;\n      },\n      // Checks if this element is a flipbook\n\n      is: function () {\n        return typeof this.data().pages == 'object';\n      },\n      // Sets and gets the zoom value\n\n      zoom: function (newZoom) {\n        var data = this.data();\n        if (typeof newZoom == 'number') {\n          if (newZoom < 0.001 || newZoom > 100) throw turnError(newZoom + ' is not a value for zoom');\n          if (trigger('zooming', this, [newZoom, data.zoom]) == 'prevented') return this;\n          var size = this.turn('size'),\n            currentView = this.turn('view'),\n            iz = 1 / data.zoom,\n            newWidth = Math.round(size.width * iz * newZoom),\n            newHeight = Math.round(size.height * iz * newZoom);\n          data.zoom = newZoom;\n          $(this).turn('stop').turn('size', newWidth, newHeight);\n          /*.\n          css({marginTop: size.height * iz / 2 - newHeight / 2});*/\n\n          if (data.opts.autoCenter) this.turn('center');\n          /*else\n            $(this).css({marginLeft: size.width * iz / 2 - newWidth / 2});*/\n\n          turnMethods._updateShadow.call(this);\n          for (var i = 0; i < currentView.length; i++) {\n            if (currentView[i] && data.pageZoom[currentView[i]] != data.zoom) {\n              this.trigger('zoomed', [currentView[i], currentView, data.pageZoom[currentView[i]], data.zoom]);\n              data.pageZoom[currentView[i]] = data.zoom;\n            }\n          }\n          return this;\n        } else return data.zoom;\n      },\n      // Gets the size of a page\n\n      _pageSize: function (page, position) {\n        var data = this.data(),\n          prop = {};\n        if (data.display == 'single') {\n          prop.width = this.width();\n          prop.height = this.height();\n          if (position) {\n            prop.top = 0;\n            prop.left = 0;\n            prop.right = 'auto';\n          }\n        } else {\n          var pageWidth = this.width() / 2,\n            pageHeight = this.height();\n          if (data.pageObjs[page].hasClass('own-size')) {\n            prop.width = data.pageObjs[page].width();\n            prop.height = data.pageObjs[page].height();\n          } else {\n            prop.width = pageWidth;\n            prop.height = pageHeight;\n          }\n          if (position) {\n            var odd = page % 2;\n            prop.top = (pageHeight - prop.height) / 2;\n            if (data.direction == 'ltr') {\n              prop[odd ? 'right' : 'left'] = pageWidth - prop.width;\n              prop[odd ? 'left' : 'right'] = 'auto';\n            } else {\n              prop[odd ? 'left' : 'right'] = pageWidth - prop.width;\n              prop[odd ? 'right' : 'left'] = 'auto';\n            }\n          }\n        }\n        return prop;\n      },\n      // Prepares the flip effect for a page\n\n      _makeFlip: function (page) {\n        var data = this.data();\n        if (!data.pages[page] && data.pagePlace[page] == page) {\n          var single = data.display == 'single',\n            odd = page % 2;\n          data.pages[page] = data.pageObjs[page].css(turnMethods._pageSize.call(this, page)).flip({\n            page: page,\n            next: odd || single ? page + 1 : page - 1,\n            turn: this\n          }).flip('disable', data.disabled);\n\n          // Issue about z-index\n          turnMethods._setPageLoc.call(this, page);\n          data.pageZoom[page] = data.zoom;\n        }\n        return data.pages[page];\n      },\n      // Makes pages within a range\n\n      _makeRange: function () {\n        var page,\n          range,\n          data = this.data();\n        if (data.totalPages < 1) return;\n        range = this.turn('range');\n        for (page = range[0]; page <= range[1]; page++) turnMethods._addPage.call(this, page);\n      },\n      // Returns a range of pages that should be in the DOM\n      // Example:\n      // - page in the current view, return true\n      // * page is in the range, return true\n      // Otherwise, return false\n      //\n      // 1 2-3 4-5 6-7 8-9 10-11 12-13\n      //   **  **  --   **  **\n\n      range: function (page) {\n        var remainingPages,\n          left,\n          right,\n          view,\n          data = this.data();\n        page = page || data.tpage || data.page || 1;\n        view = turnMethods._view.call(this, page);\n        if (page < 1 || page > data.totalPages) throw turnError('\"' + page + '\" is not a valid page');\n        view[1] = view[1] || view[0];\n        if (view[0] >= 1 && view[1] <= data.totalPages) {\n          remainingPages = Math.floor((pagesInDOM - 2) / 2);\n          if (data.totalPages - view[1] > view[0]) {\n            left = Math.min(view[0] - 1, remainingPages);\n            right = 2 * remainingPages - left;\n          } else {\n            right = Math.min(data.totalPages - view[1], remainingPages);\n            left = 2 * remainingPages - right;\n          }\n        } else {\n          left = pagesInDOM - 1;\n          right = pagesInDOM - 1;\n        }\n        return [Math.max(1, view[0] - left), Math.min(data.totalPages, view[1] + right)];\n      },\n      // Detects if a page is within the range of `pagesInDOM` from the current view\n\n      _necessPage: function (page) {\n        if (page === 0) return true;\n        var range = this.turn('range');\n        return this.data().pageObjs[page].hasClass('fixed') || page >= range[0] && page <= range[1];\n      },\n      // Releases memory by removing pages from the DOM\n\n      _removeFromDOM: function () {\n        var page,\n          data = this.data();\n        for (page in data.pageWrap) if (has(page, data.pageWrap) && !turnMethods._necessPage.call(this, page)) turnMethods._removePageFromDOM.call(this, page);\n      },\n      // Removes a page from DOM and its internal references\n\n      _removePageFromDOM: function (page) {\n        var data = this.data();\n        if (data.pages[page]) {\n          var dd = data.pages[page].data();\n          flipMethods._moveFoldingPage.call(data.pages[page], false);\n          if (dd.f && dd.f.fwrapper) dd.f.fwrapper.remove();\n          data.pages[page].removeData();\n          data.pages[page].remove();\n          delete data.pages[page];\n        }\n        if (data.pageObjs[page]) data.pageObjs[page].remove();\n        if (data.pageWrap[page]) {\n          data.pageWrap[page].remove();\n          delete data.pageWrap[page];\n        }\n        turnMethods._removeMv.call(this, page);\n        delete data.pagePlace[page];\n        delete data.pageZoom[page];\n      },\n      // Removes a page\n\n      removePage: function (page) {\n        var data = this.data();\n\n        // Delete all the pages\n        if (page == '*') {\n          while (data.totalPages !== 0) {\n            this.turn('removePage', data.totalPages);\n          }\n        } else {\n          if (page < 1 || page > data.totalPages) throw turnError('The page ' + page + ' doesn\\'t exist');\n          if (data.pageObjs[page]) {\n            // Stop animations\n            this.turn('stop');\n\n            // Remove `page`\n            turnMethods._removePageFromDOM.call(this, page);\n            delete data.pageObjs[page];\n          }\n\n          // Move the pages\n          turnMethods._movePages.call(this, page, -1);\n\n          // Resize the size of this flipbook\n          data.totalPages = data.totalPages - 1;\n\n          // Check the current view\n\n          if (data.page > data.totalPages) {\n            data.page = null;\n            turnMethods._fitPage.call(this, data.totalPages);\n          } else {\n            turnMethods._makeRange.call(this);\n            this.turn('update');\n          }\n        }\n        return this;\n      },\n      // Moves pages\n\n      _movePages: function (from, change) {\n        var page,\n          that = this,\n          data = this.data(),\n          single = data.display == 'single',\n          move = function (page) {\n            var next = page + change,\n              odd = next % 2,\n              className = odd ? ' odd ' : ' even ';\n            if (data.pageObjs[page]) data.pageObjs[next] = data.pageObjs[page].removeClass('p' + page + ' odd even').addClass('p' + next + className);\n            if (data.pagePlace[page] && data.pageWrap[page]) {\n              data.pagePlace[next] = next;\n              if (data.pageObjs[next].hasClass('fixed')) data.pageWrap[next] = data.pageWrap[page].attr('page', next);else data.pageWrap[next] = data.pageWrap[page].css(turnMethods._pageSize.call(that, next, true)).attr('page', next);\n              if (data.pages[page]) data.pages[next] = data.pages[page].flip('options', {\n                page: next,\n                next: single || odd ? next + 1 : next - 1\n              });\n              if (change) {\n                delete data.pages[page];\n                delete data.pagePlace[page];\n                delete data.pageZoom[page];\n                delete data.pageObjs[page];\n                delete data.pageWrap[page];\n              }\n            }\n          };\n        if (change > 0) for (page = data.totalPages; page >= from; page--) move(page);else for (page = from; page <= data.totalPages; page++) move(page);\n      },\n      // Sets or Gets the display mode\n\n      display: function (display) {\n        var data = this.data(),\n          currentDisplay = data.display;\n        if (display === undefined) {\n          return currentDisplay;\n        } else {\n          if ($.inArray(display, displays) == -1) throw turnError('\"' + display + '\" is not a value for display');\n          switch (display) {\n            case 'single':\n              // Create a temporal page to use as folded page\n\n              if (!data.pageObjs[0]) {\n                this.turn('stop').css({\n                  'overflow': 'hidden'\n                });\n                data.pageObjs[0] = $('<div />', {\n                  'class': 'page p-temporal'\n                }).css({\n                  width: this.width(),\n                  height: this.height()\n                }).appendTo(this);\n              }\n              this.addClass('shadow');\n              break;\n            case 'double':\n              // Remove the temporal page\n\n              if (data.pageObjs[0]) {\n                this.turn('stop').css({\n                  'overflow': ''\n                });\n                data.pageObjs[0].remove();\n                delete data.pageObjs[0];\n              }\n              this.removeClass('shadow');\n              break;\n          }\n          data.display = display;\n          if (currentDisplay) {\n            var size = this.turn('size');\n            turnMethods._movePages.call(this, 1, 0);\n            this.turn('size', size.width, size.height).turn('update');\n          }\n          return this;\n        }\n      },\n      // Gets and sets the direction of the flipbook\n\n      direction: function (dir) {\n        var data = this.data();\n        if (dir === undefined) {\n          return data.direction;\n        } else {\n          dir = dir.toLowerCase();\n          if ($.inArray(dir, directions) == -1) throw turnError('\"' + dir + '\" is not a value for direction');\n          if (dir == 'rtl') {\n            $(this).attr('dir', 'ltr').css({\n              direction: 'ltr'\n            });\n          }\n          data.direction = dir;\n          if (data.done) this.turn('size', $(this).width(), $(this).height());\n          return this;\n        }\n      },\n      // Detects animation\n\n      animating: function () {\n        return this.data().pageMv.length > 0;\n      },\n      // Gets the current activated corner\n\n      corner: function () {\n        var corner,\n          page,\n          data = this.data();\n        for (page in data.pages) {\n          if (has(page, data.pages)) if (corner = data.pages[page].flip('corner')) {\n            return corner;\n          }\n        }\n        return false;\n      },\n      // Gets the data stored in the flipbook\n\n      data: function () {\n        return this.data();\n      },\n      // Disables and enables the effect\n\n      disable: function (disable) {\n        var page,\n          data = this.data(),\n          view = this.turn('view');\n        data.disabled = disable === undefined || disable === true;\n        for (page in data.pages) {\n          if (has(page, data.pages)) data.pages[page].flip('disable', data.disabled ? true : $.inArray(parseInt(page, 10), view) == -1);\n        }\n        return this;\n      },\n      // Disables and enables the effect\n\n      disabled: function (disable) {\n        if (disable === undefined) {\n          return this.data().disabled === true;\n        } else {\n          return this.turn('disable', disable);\n        }\n      },\n      // Gets and sets the size\n\n      size: function (width, height) {\n        if (width === undefined || height === undefined) {\n          return {\n            width: this.width(),\n            height: this.height()\n          };\n        } else {\n          this.turn('stop');\n          var page,\n            prop,\n            data = this.data(),\n            pageWidth = data.display == 'double' ? width / 2 : width;\n          this.css({\n            width: width,\n            height: height\n          });\n          if (data.pageObjs[0]) data.pageObjs[0].css({\n            width: pageWidth,\n            height: height\n          });\n          for (page in data.pageWrap) {\n            if (!has(page, data.pageWrap)) continue;\n            prop = turnMethods._pageSize.call(this, page, true);\n            data.pageObjs[page].css({\n              width: prop.width,\n              height: prop.height\n            });\n            data.pageWrap[page].css(prop);\n            if (data.pages[page]) data.pages[page].css({\n              width: prop.width,\n              height: prop.height\n            });\n          }\n          this.turn('resize');\n          return this;\n        }\n      },\n      // Resizes each page\n\n      resize: function () {\n        var page,\n          data = this.data();\n        if (data.pages[0]) {\n          data.pageWrap[0].css({\n            left: -this.width()\n          });\n          data.pages[0].flip('resize', true);\n        }\n        for (page = 1; page <= data.totalPages; page++) if (data.pages[page]) data.pages[page].flip('resize', true);\n        turnMethods._updateShadow.call(this);\n        if (data.opts.autoCenter) this.turn('center');\n      },\n      // Removes an animation from the cache\n\n      _removeMv: function (page) {\n        var i,\n          data = this.data();\n        for (i = 0; i < data.pageMv.length; i++) if (data.pageMv[i] == page) {\n          data.pageMv.splice(i, 1);\n          return true;\n        }\n        return false;\n      },\n      // Adds an animation to the cache\n\n      _addMv: function (page) {\n        var data = this.data();\n        turnMethods._removeMv.call(this, page);\n        data.pageMv.push(page);\n      },\n      // Gets indexes for a view\n\n      _view: function (page) {\n        var data = this.data();\n        page = page || data.page;\n        if (data.display == 'double') return page % 2 ? [page - 1, page] : [page, page + 1];else return [page];\n      },\n      // Gets a view\n\n      view: function (page) {\n        var data = this.data(),\n          view = turnMethods._view.call(this, page);\n        if (data.display == 'double') return [view[0] > 0 ? view[0] : 0, view[1] <= data.totalPages ? view[1] : 0];else return [view[0] > 0 && view[0] <= data.totalPages ? view[0] : 0];\n      },\n      // Stops animations\n\n      stop: function (ignore, animate) {\n        if (this.turn('animating')) {\n          var i,\n            opts,\n            page,\n            data = this.data();\n          if (data.tpage) {\n            data.page = data.tpage;\n            delete data['tpage'];\n          }\n          for (i = 0; i < data.pageMv.length; i++) {\n            if (!data.pageMv[i] || data.pageMv[i] === ignore) continue;\n            page = data.pages[data.pageMv[i]];\n            opts = page.data().f.opts;\n            page.flip('hideFoldedPage', animate);\n            if (!animate) flipMethods._moveFoldingPage.call(page, false);\n            if (opts.force) {\n              opts.next = opts.page % 2 === 0 ? opts.page - 1 : opts.page + 1;\n              delete opts['force'];\n            }\n          }\n        }\n        this.turn('update');\n        return this;\n      },\n      // Gets and sets the number of pages\n\n      pages: function (pages) {\n        var data = this.data();\n        if (pages) {\n          if (pages < data.totalPages) {\n            for (var page = data.totalPages; page > pages; page--) this.turn('removePage', page);\n          }\n          data.totalPages = pages;\n          turnMethods._fitPage.call(this, data.page);\n          return this;\n        } else return data.totalPages;\n      },\n      // Checks missing pages\n\n      _missing: function (page) {\n        var data = this.data();\n        if (data.totalPages < 1) return;\n        var p,\n          range = this.turn('range', page),\n          missing = [];\n        for (p = range[0]; p <= range[1]; p++) {\n          if (!data.pageObjs[p]) missing.push(p);\n        }\n        if (missing.length > 0) this.trigger('missing', [missing]);\n      },\n      // Sets a page without effect\n\n      _fitPage: function (page) {\n        var data = this.data(),\n          newView = this.turn('view', page);\n        turnMethods._missing.call(this, page);\n        if (!data.pageObjs[page]) return;\n        data.page = page;\n        this.turn('stop');\n        for (var i = 0; i < newView.length; i++) {\n          if (newView[i] && data.pageZoom[newView[i]] != data.zoom) {\n            this.trigger('zoomed', [newView[i], newView, data.pageZoom[newView[i]], data.zoom]);\n            data.pageZoom[newView[i]] = data.zoom;\n          }\n        }\n        turnMethods._removeFromDOM.call(this);\n        turnMethods._makeRange.call(this);\n        turnMethods._updateShadow.call(this);\n        this.trigger('turned', [page, newView]);\n        this.turn('update');\n        if (data.opts.autoCenter) this.turn('center');\n      },\n      // Turns the page\n\n      _turnPage: function (page) {\n        var current,\n          next,\n          data = this.data(),\n          place = data.pagePlace[page],\n          view = this.turn('view'),\n          newView = this.turn('view', page);\n        if (data.page != page) {\n          var currentPage = data.page;\n          if (trigger('turning', this, [page, newView]) == 'prevented') {\n            if (currentPage == data.page && $.inArray(place, data.pageMv) != -1) data.pages[place].flip('hideFoldedPage', true);\n            return;\n          }\n          if ($.inArray(1, newView) != -1) this.trigger('first');\n          if ($.inArray(data.totalPages, newView) != -1) this.trigger('last');\n        }\n        if (data.display == 'single') {\n          current = view[0];\n          next = newView[0];\n        } else if (view[1] && page > view[1]) {\n          current = view[1];\n          next = newView[0];\n        } else if (view[0] && page < view[0]) {\n          current = view[0];\n          next = newView[1];\n        }\n        var optsCorners = data.opts.turnCorners.split(','),\n          flipData = data.pages[current].data().f,\n          opts = flipData.opts,\n          actualPoint = flipData.point;\n        turnMethods._missing.call(this, page);\n        if (!data.pageObjs[page]) return;\n        this.turn('stop');\n        data.page = page;\n        turnMethods._makeRange.call(this);\n        data.tpage = next;\n        if (opts.next != next) {\n          opts.next = next;\n          opts.force = true;\n        }\n        this.turn('update');\n        flipData.point = actualPoint;\n        if (flipData.effect == 'hard') {\n          if (data.direction == 'ltr') data.pages[current].flip('turnPage', page > current ? 'r' : 'l');else data.pages[current].flip('turnPage', page > current ? 'l' : 'r');\n        } else {\n          if (data.direction == 'ltr') data.pages[current].flip('turnPage', optsCorners[page > current ? 1 : 0]);else data.pages[current].flip('turnPage', optsCorners[page > current ? 0 : 1]);\n        }\n      },\n      // Gets and sets a page\n\n      page: function (page) {\n        var data = this.data();\n        if (page === undefined) {\n          return data.page;\n        } else {\n          if (!data.disabled && !data.destroying) {\n            page = parseInt(page, 10);\n            if (page > 0 && page <= data.totalPages) {\n              if (page != data.page) {\n                if (!data.done || $.inArray(page, this.turn('view')) != -1) turnMethods._fitPage.call(this, page);else turnMethods._turnPage.call(this, page);\n              }\n              return this;\n            } else {\n              throw turnError('The page ' + page + ' does not exist');\n            }\n          }\n        }\n      },\n      // Turns to the next view\n\n      next: function () {\n        return this.turn('page', Math.min(this.data().totalPages, turnMethods._view.call(this, this.data().page).pop() + 1));\n      },\n      // Turns to the previous view\n\n      previous: function () {\n        return this.turn('page', Math.max(1, turnMethods._view.call(this, this.data().page).shift() - 1));\n      },\n      // Shows a peeling corner\n\n      peel: function (corner, animate) {\n        var data = this.data(),\n          view = this.turn('view');\n        animate = animate === undefined ? true : animate === true;\n        if (corner === false) {\n          this.turn('stop', null, animate);\n        } else {\n          if (data.display == 'single') {\n            data.pages[data.page].flip('peel', corner, animate);\n          } else {\n            var page;\n            if (data.direction == 'ltr') {\n              page = corner.indexOf('l') != -1 ? view[0] : view[1];\n            } else {\n              page = corner.indexOf('l') != -1 ? view[1] : view[0];\n            }\n            if (data.pages[page]) data.pages[page].flip('peel', corner, animate);\n          }\n        }\n        return this;\n      },\n      // Adds a motion to the internal list\n      // This event is called in context of flip\n\n      _addMotionPage: function () {\n        var opts = $(this).data().f.opts,\n          turn = opts.turn,\n          dd = turn.data();\n        turnMethods._addMv.call(turn, opts.page);\n      },\n      // This event is called in context of flip\n\n      _eventStart: function (e, opts, corner) {\n        var data = opts.turn.data(),\n          actualZoom = data.pageZoom[opts.page];\n        if (e.isDefaultPrevented()) {\n          turnMethods._updateShadow.call(opts.turn);\n          return;\n        }\n        if (actualZoom && actualZoom != data.zoom) {\n          opts.turn.trigger('zoomed', [opts.page, opts.turn.turn('view', opts.page), actualZoom, data.zoom]);\n          data.pageZoom[opts.page] = data.zoom;\n        }\n        if (data.display == 'single' && corner) {\n          if (corner.charAt(1) == 'l' && data.direction == 'ltr' || corner.charAt(1) == 'r' && data.direction == 'rtl') {\n            opts.next = opts.next < opts.page ? opts.next : opts.page - 1;\n            opts.force = true;\n          } else {\n            opts.next = opts.next > opts.page ? opts.next : opts.page + 1;\n          }\n        }\n        turnMethods._addMotionPage.call(e.target);\n        turnMethods._updateShadow.call(opts.turn);\n      },\n      // This event is called in context of flip\n\n      _eventEnd: function (e, opts, turned) {\n        var that = $(e.target),\n          data = that.data().f,\n          turn = opts.turn,\n          dd = turn.data();\n        if (turned) {\n          var tpage = dd.tpage || dd.page;\n          if (tpage == opts.next || tpage == opts.page) {\n            delete dd.tpage;\n            turnMethods._fitPage.call(turn, tpage || opts.next, true);\n          }\n        } else {\n          turnMethods._removeMv.call(turn, opts.page);\n          turnMethods._updateShadow.call(turn);\n          turn.turn('update');\n        }\n      },\n      // This event is called in context of flip\n\n      _eventPressed: function (e) {\n        var page,\n          data = $(e.target).data().f,\n          turn = data.opts.turn,\n          turnData = turn.data(),\n          pages = turnData.pages;\n        turnData.mouseAction = true;\n        turn.turn('update');\n        return data.time = new Date().getTime();\n      },\n      // This event is called in context of flip\n\n      _eventReleased: function (e, point) {\n        var outArea,\n          page = $(e.target),\n          data = page.data().f,\n          turn = data.opts.turn,\n          turnData = turn.data();\n        if (turnData.display == 'single') {\n          outArea = point.corner == 'br' || point.corner == 'tr' ? point.x < page.width() / 2 : point.x > page.width() / 2;\n        } else {\n          outArea = point.x < 0 || point.x > page.width();\n        }\n        if (new Date().getTime() - data.time < 200 || outArea) {\n          e.preventDefault();\n          turnMethods._turnPage.call(turn, data.opts.next);\n        }\n        turnData.mouseAction = false;\n      },\n      // This event is called in context of flip\n\n      _flip: function (e) {\n        e.stopPropagation();\n        var opts = $(e.target).data().f.opts;\n        opts.turn.trigger('turn', [opts.next]);\n        if (opts.turn.data().opts.autoCenter) {\n          opts.turn.turn('center', opts.next);\n        }\n      },\n      //\n      _touchStart: function () {\n        var data = this.data();\n        for (var page in data.pages) {\n          if (has(page, data.pages) && flipMethods._eventStart.apply(data.pages[page], arguments) === false) {\n            return false;\n          }\n        }\n      },\n      //\n      _touchMove: function () {\n        var data = this.data();\n        for (var page in data.pages) {\n          if (has(page, data.pages)) {\n            flipMethods._eventMove.apply(data.pages[page], arguments);\n          }\n        }\n      },\n      //\n      _touchEnd: function () {\n        var data = this.data();\n        for (var page in data.pages) {\n          if (has(page, data.pages)) {\n            flipMethods._eventEnd.apply(data.pages[page], arguments);\n          }\n        }\n      },\n      // Calculate the z-index value for pages during the animation\n\n      calculateZ: function (mv) {\n        var i,\n          page,\n          nextPage,\n          placePage,\n          dpage,\n          that = this,\n          data = this.data(),\n          view = this.turn('view'),\n          currentPage = view[0] || view[1],\n          total = mv.length - 1,\n          r = {\n            pageZ: {},\n            partZ: {},\n            pageV: {}\n          },\n          addView = function (page) {\n            var view = that.turn('view', page);\n            if (view[0]) r.pageV[view[0]] = true;\n            if (view[1]) r.pageV[view[1]] = true;\n          };\n        for (i = 0; i <= total; i++) {\n          page = mv[i];\n          nextPage = data.pages[page].data().f.opts.next;\n          placePage = data.pagePlace[page];\n          addView(page);\n          addView(nextPage);\n          dpage = data.pagePlace[nextPage] == nextPage ? nextPage : page;\n          r.pageZ[dpage] = data.totalPages - Math.abs(currentPage - dpage);\n          r.partZ[placePage] = data.totalPages * 2 - total + i;\n        }\n        return r;\n      },\n      // Updates the z-index and display property of every page\n\n      update: function () {\n        var page,\n          data = this.data();\n        if (this.turn('animating') && data.pageMv[0] !== 0) {\n          // Update motion\n\n          var p,\n            apage,\n            fixed,\n            pos = this.turn('calculateZ', data.pageMv),\n            corner = this.turn('corner'),\n            actualView = this.turn('view'),\n            newView = this.turn('view', data.tpage);\n          for (page in data.pageWrap) {\n            if (!has(page, data.pageWrap)) continue;\n            fixed = data.pageObjs[page].hasClass('fixed');\n            data.pageWrap[page].css({\n              display: pos.pageV[page] || fixed ? '' : 'none',\n              zIndex: (data.pageObjs[page].hasClass('hard') ? pos.partZ[page] : pos.pageZ[page]) || (fixed ? -1 : 0)\n            });\n            if (p = data.pages[page]) {\n              p.flip('z', pos.partZ[page] || null);\n              if (pos.pageV[page]) p.flip('resize');\n              if (data.tpage) {\n                // Is it turning the page to `tpage`?\n\n                p.flip('hover', false).flip('disable', $.inArray(parseInt(page, 10), data.pageMv) == -1 && page != newView[0] && page != newView[1]);\n              } else {\n                p.flip('hover', corner === false).flip('disable', page != actualView[0] && page != actualView[1]);\n              }\n            }\n          }\n        } else {\n          // Update static pages\n\n          for (page in data.pageWrap) {\n            if (!has(page, data.pageWrap)) continue;\n            var pageLocation = turnMethods._setPageLoc.call(this, page);\n            if (data.pages[page]) {\n              data.pages[page].flip('disable', data.disabled || pageLocation != 1).flip('hover', true).flip('z', null);\n            }\n          }\n        }\n        return this;\n      },\n      // Updates the position and size of the flipbook's shadow\n\n      _updateShadow: function () {\n        var view,\n          view2,\n          shadow,\n          data = this.data(),\n          width = this.width(),\n          height = this.height(),\n          pageWidth = data.display == 'single' ? width : width / 2;\n        view = this.turn('view');\n        if (!data.shadow) {\n          data.shadow = $('<div />', {\n            'class': 'shadow',\n            'css': divAtt(0, 0, 0).css\n          }).appendTo(this);\n        }\n        for (var i = 0; i < data.pageMv.length; i++) {\n          if (!view[0] || !view[1]) break;\n          view = this.turn('view', data.pages[data.pageMv[i]].data().f.opts.next);\n          view2 = this.turn('view', data.pageMv[i]);\n          view[0] = view[0] && view2[0];\n          view[1] = view[1] && view2[1];\n        }\n        if (!view[0]) shadow = data.direction == 'ltr' ? 1 : 2;else if (!view[1]) shadow = data.direction == 'ltr' ? 2 : 1;else shadow = 3;\n        switch (shadow) {\n          case 1:\n            data.shadow.css({\n              width: pageWidth,\n              height: height,\n              top: 0,\n              left: pageWidth\n            });\n            break;\n          case 2:\n            data.shadow.css({\n              width: pageWidth,\n              height: height,\n              top: 0,\n              left: 0\n            });\n            break;\n          case 3:\n            data.shadow.css({\n              width: width,\n              height: height,\n              top: 0,\n              left: 0\n            });\n            break;\n        }\n      },\n      // Sets the z-index and display property of a page\n      // It depends on the current view\n\n      _setPageLoc: function (page) {\n        var data = this.data(),\n          view = this.turn('view'),\n          loc = 0;\n        if (page == view[0] || page == view[1]) loc = 1;else if (data.display == 'single' && page == view[0] + 1 || data.display == 'double' && page == view[0] - 2 || page == view[1] + 2) loc = 2;\n        if (!this.turn('animating')) switch (loc) {\n          case 1:\n            data.pageWrap[page].css({\n              zIndex: data.totalPages,\n              display: ''\n            });\n            break;\n          case 2:\n            data.pageWrap[page].css({\n              zIndex: data.totalPages - 1,\n              display: ''\n            });\n            break;\n          case 0:\n            data.pageWrap[page].css({\n              zIndex: 0,\n              display: data.pageObjs[page].hasClass('fixed') ? '' : 'none'\n            });\n            break;\n        }\n        return loc;\n      },\n      // Gets and sets the options\n\n      options: function (options) {\n        if (options === undefined) {\n          return this.data().opts;\n        } else {\n          var data = this.data();\n\n          // Set new values\n\n          $.extend(data.opts, options);\n\n          // Set pages\n\n          if (options.pages) this.turn('pages', options.pages);\n\n          // Set page\n\n          if (options.page) this.turn('page', options.page);\n\n          // Set display\n\n          if (options.display) this.turn('display', options.display);\n\n          // Set direction\n\n          if (options.direction) this.turn('direction', options.direction);\n\n          // Set size\n\n          if (options.width && options.height) this.turn('size', options.width, options.height);\n\n          // Add event listeners\n\n          if (options.when) for (var eventName in options.when) if (has(eventName, options.when)) {\n            this.unbind(eventName).bind(eventName, options.when[eventName]);\n          }\n          return this;\n        }\n      },\n      // Gets the current version\n\n      version: function () {\n        return version;\n      }\n    },\n    // Methods and properties for the flip page effect\n\n    flipMethods = {\n      // Constructor\n\n      init: function (opts) {\n        this.data({\n          f: {\n            disabled: false,\n            hover: false,\n            effect: this.hasClass('hard') ? 'hard' : 'sheet'\n          }\n        });\n        this.flip('options', opts);\n        flipMethods._addPageWrapper.call(this);\n        return this;\n      },\n      setData: function (d) {\n        var data = this.data();\n        data.f = $.extend(data.f, d);\n        return this;\n      },\n      options: function (opts) {\n        var data = this.data().f;\n        if (opts) {\n          flipMethods.setData.call(this, {\n            opts: $.extend({}, data.opts || flipOptions, opts)\n          });\n          return this;\n        } else return data.opts;\n      },\n      z: function (z) {\n        var data = this.data().f;\n        data.opts['z-index'] = z;\n        if (data.fwrapper) data.fwrapper.css({\n          zIndex: z || parseInt(data.parent.css('z-index'), 10) || 0\n        });\n        return this;\n      },\n      _cAllowed: function () {\n        var data = this.data().f,\n          page = data.opts.page,\n          turnData = data.opts.turn.data(),\n          odd = page % 2;\n        if (data.effect == 'hard') {\n          return turnData.direction == 'ltr' ? [odd ? 'r' : 'l'] : [odd ? 'l' : 'r'];\n        } else {\n          if (turnData.display == 'single') {\n            if (page == 1) return turnData.direction == 'ltr' ? corners['forward'] : corners['backward'];else if (page == turnData.totalPages) return turnData.direction == 'ltr' ? corners['backward'] : corners['forward'];else return corners['all'];\n          } else {\n            return turnData.direction == 'ltr' ? corners[odd ? 'forward' : 'backward'] : corners[odd ? 'backward' : 'forward'];\n          }\n        }\n      },\n      _cornerActivated: function (p) {\n        var data = this.data().f,\n          width = this.width(),\n          height = this.height(),\n          point = {\n            x: p.x,\n            y: p.y,\n            corner: ''\n          },\n          csz = data.opts.cornerSize;\n        if (point.x <= 0 || point.y <= 0 || point.x >= width || point.y >= height) return false;\n        var allowedCorners = flipMethods._cAllowed.call(this);\n        switch (data.effect) {\n          case 'hard':\n            if (point.x > width - csz) point.corner = 'r';else if (point.x < csz) point.corner = 'l';else return false;\n            break;\n          case 'sheet':\n            if (point.y < csz) point.corner += 't';else if (point.y >= height - csz) point.corner += 'b';else return false;\n            if (point.x <= csz) point.corner += 'l';else if (point.x >= width - csz) point.corner += 'r';else return false;\n            break;\n        }\n        return !point.corner || $.inArray(point.corner, allowedCorners) == -1 ? false : point;\n      },\n      _isIArea: function (e) {\n        var pos = this.data().f.parent.offset();\n        e = isTouch && e.originalEvent ? e.originalEvent.touches[0] : e;\n        return flipMethods._cornerActivated.call(this, {\n          x: e.pageX - pos.left,\n          y: e.pageY - pos.top\n        });\n      },\n      _c: function (corner, opts) {\n        opts = opts || 0;\n        switch (corner) {\n          case 'tl':\n            return point2D(opts, opts);\n          case 'tr':\n            return point2D(this.width() - opts, opts);\n          case 'bl':\n            return point2D(opts, this.height() - opts);\n          case 'br':\n            return point2D(this.width() - opts, this.height() - opts);\n          case 'l':\n            return point2D(opts, 0);\n          case 'r':\n            return point2D(this.width() - opts, 0);\n        }\n      },\n      _c2: function (corner) {\n        switch (corner) {\n          case 'tl':\n            return point2D(this.width() * 2, 0);\n          case 'tr':\n            return point2D(-this.width(), 0);\n          case 'bl':\n            return point2D(this.width() * 2, this.height());\n          case 'br':\n            return point2D(-this.width(), this.height());\n          case 'l':\n            return point2D(this.width() * 2, 0);\n          case 'r':\n            return point2D(-this.width(), 0);\n        }\n      },\n      _foldingPage: function () {\n        var data = this.data().f;\n        if (!data) return;\n        var opts = data.opts;\n        if (opts.turn) {\n          data = opts.turn.data();\n          if (data.display == 'single') return opts.next > 1 || opts.page > 1 ? data.pageObjs[0] : null;else return data.pageObjs[opts.next];\n        }\n      },\n      _backGradient: function () {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          gradient = turnData.opts.gradients && (turnData.display == 'single' || data.opts.page != 2 && data.opts.page != turnData.totalPages - 1);\n        if (gradient && !data.bshadow) data.bshadow = $('<div/>', divAtt(0, 0, 1)).css({\n          'position': '',\n          width: this.width(),\n          height: this.height()\n        }).appendTo(data.parent);\n        return gradient;\n      },\n      type: function () {\n        return this.data().f.effect;\n      },\n      resize: function (full) {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          width = this.width(),\n          height = this.height();\n        switch (data.effect) {\n          case 'hard':\n            if (full) {\n              data.wrapper.css({\n                width: width,\n                height: height\n              });\n              data.fpage.css({\n                width: width,\n                height: height\n              });\n              if (turnData.opts.gradients) {\n                data.ashadow.css({\n                  width: width,\n                  height: height\n                });\n                data.bshadow.css({\n                  width: width,\n                  height: height\n                });\n              }\n            }\n            break;\n          case 'sheet':\n            if (full) {\n              var size = Math.round(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n              data.wrapper.css({\n                width: size,\n                height: size\n              });\n              data.fwrapper.css({\n                width: size,\n                height: size\n              }).children(':first-child').css({\n                width: width,\n                height: height\n              });\n              data.fpage.css({\n                width: width,\n                height: height\n              });\n              if (turnData.opts.gradients) data.ashadow.css({\n                width: width,\n                height: height\n              });\n              if (flipMethods._backGradient.call(this)) data.bshadow.css({\n                width: width,\n                height: height\n              });\n            }\n            if (data.parent.is(':visible')) {\n              var offset = findPos(data.parent[0]);\n              data.fwrapper.css({\n                top: offset.top,\n                left: offset.left\n              });\n\n              //if (data.opts.turn) {\n              offset = findPos(data.opts.turn[0]);\n              data.fparent.css({\n                top: -offset.top,\n                left: -offset.left\n              });\n              //}\n            }\n            this.flip('z', data.opts['z-index']);\n            break;\n        }\n      },\n      // Prepares the page by adding a general wrapper and another objects\n\n      _addPageWrapper: function () {\n        var att,\n          data = this.data().f,\n          turnData = data.opts.turn.data(),\n          parent = this.parent();\n        data.parent = parent;\n        if (!data.wrapper) switch (data.effect) {\n          case 'hard':\n            var cssProperties = {};\n            cssProperties[vendor + 'transform-style'] = 'preserve-3d';\n            cssProperties[vendor + 'backface-visibility'] = 'hidden';\n            data.wrapper = $('<div/>', divAtt(0, 0, 2)).css(cssProperties).appendTo(parent).prepend(this);\n            data.fpage = $('<div/>', divAtt(0, 0, 1)).css(cssProperties).appendTo(parent);\n            if (turnData.opts.gradients) {\n              data.ashadow = $('<div/>', divAtt(0, 0, 0)).hide().appendTo(parent);\n              data.bshadow = $('<div/>', divAtt(0, 0, 0));\n            }\n            break;\n          case 'sheet':\n            var width = this.width(),\n              height = this.height(),\n              size = Math.round(Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)));\n            data.fparent = data.opts.turn.data().fparent;\n            if (!data.fparent) {\n              var fparent = $('<div/>', {\n                css: {\n                  'pointer-events': 'none'\n                }\n              }).hide();\n              fparent.data().flips = 0;\n              fparent.css(divAtt(0, 0, 'auto', 'visible').css).appendTo(data.opts.turn);\n              data.opts.turn.data().fparent = fparent;\n              data.fparent = fparent;\n            }\n            this.css({\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              bottom: 'auto',\n              right: 'auto'\n            });\n            data.wrapper = $('<div/>', divAtt(0, 0, this.css('z-index'))).appendTo(parent).prepend(this);\n            data.fwrapper = $('<div/>', divAtt(parent.offset().top, parent.offset().left)).hide().appendTo(data.fparent);\n            data.fpage = $('<div/>', divAtt(0, 0, 0, 'visible')).css({\n              cursor: 'default'\n            }).appendTo(data.fwrapper);\n            if (turnData.opts.gradients) data.ashadow = $('<div/>', divAtt(0, 0, 1)).appendTo(data.fpage);\n            flipMethods.setData.call(this, data);\n            break;\n        }\n\n        // Set size\n        flipMethods.resize.call(this, true);\n      },\n      // Takes a 2P point from the screen and applies the transformation\n\n      _fold: function (point) {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          o = flipMethods._c.call(this, point.corner),\n          width = this.width(),\n          height = this.height();\n        switch (data.effect) {\n          case 'hard':\n            if (point.corner == 'l') point.x = Math.min(Math.max(point.x, 0), width * 2);else point.x = Math.max(Math.min(point.x, width), -width);\n            var leftPos,\n              shadow,\n              gradientX,\n              fpageOrigin,\n              parentOrigin,\n              totalPages = turnData.totalPages,\n              zIndex = data.opts['z-index'] || totalPages,\n              parentCss = {\n                'overflow': 'visible'\n              },\n              relX = o.x ? (o.x - point.x) / width : point.x / width,\n              angle = relX * 90,\n              half = angle < 90;\n            switch (point.corner) {\n              case 'l':\n                fpageOrigin = '0% 50%';\n                parentOrigin = '100% 50%';\n                if (half) {\n                  leftPos = 0;\n                  shadow = data.opts.next - 1 > 0;\n                  gradientX = 1;\n                } else {\n                  leftPos = '100%';\n                  shadow = data.opts.page + 1 < totalPages;\n                  gradientX = 0;\n                }\n                break;\n              case 'r':\n                fpageOrigin = '100% 50%';\n                parentOrigin = '0% 50%';\n                angle = -angle;\n                width = -width;\n                if (half) {\n                  leftPos = 0;\n                  shadow = data.opts.next + 1 < totalPages;\n                  gradientX = 0;\n                } else {\n                  leftPos = '-100%';\n                  shadow = data.opts.page != 1;\n                  gradientX = 1;\n                }\n                break;\n            }\n            parentCss[vendor + 'perspective-origin'] = parentOrigin;\n            data.wrapper.transform('rotateY(' + angle + 'deg)' + 'translate3d(0px, 0px, ' + (this.attr('depth') || 0) + 'px)', parentOrigin);\n            data.fpage.transform('translateX(' + width + 'px) rotateY(' + (180 + angle) + 'deg)', fpageOrigin);\n            data.parent.css(parentCss);\n            if (half) {\n              relX = -relX + 1;\n              data.wrapper.css({\n                zIndex: zIndex + 1\n              });\n              data.fpage.css({\n                zIndex: zIndex\n              });\n            } else {\n              relX = relX - 1;\n              data.wrapper.css({\n                zIndex: zIndex\n              });\n              data.fpage.css({\n                zIndex: zIndex + 1\n              });\n            }\n            if (turnData.opts.gradients) {\n              if (shadow) data.ashadow.css({\n                display: '',\n                left: leftPos,\n                backgroundColor: 'rgba(0,0,0,' + 0.5 * relX + ')'\n              }).transform('rotateY(0deg)');else data.ashadow.hide();\n              data.bshadow.css({\n                opacity: -relX + 1\n              });\n              if (half) {\n                if (data.bshadow.parent()[0] != data.wrapper[0]) {\n                  data.bshadow.appendTo(data.wrapper);\n                }\n              } else {\n                if (data.bshadow.parent()[0] != data.fpage[0]) {\n                  data.bshadow.appendTo(data.fpage);\n                }\n              }\n              /*data.bshadow.css({\n                backgroundColor: 'rgba(0,0,0,'+(0.1)+')'\n              })*/\n              gradient(data.bshadow, point2D(gradientX * 100, 0), point2D((-gradientX + 1) * 100, 0), [[0, 'rgba(0,0,0,0.3)'], [1, 'rgba(0,0,0,0)']], 2);\n            }\n            break;\n          case 'sheet':\n            var that = this,\n              a = 0,\n              alpha = 0,\n              beta,\n              px,\n              gradientEndPointA,\n              gradientEndPointB,\n              gradientStartVal,\n              gradientSize,\n              gradientOpacity,\n              shadowVal,\n              mv = point2D(0, 0),\n              df = point2D(0, 0),\n              tr = point2D(0, 0),\n              folding = flipMethods._foldingPage.call(this),\n              tan = Math.tan(alpha),\n              ac = turnData.opts.acceleration,\n              h = data.wrapper.height(),\n              top = point.corner.substr(0, 1) == 't',\n              left = point.corner.substr(1, 1) == 'l',\n              compute = function () {\n                var rel = point2D(0, 0);\n                var middle = point2D(0, 0);\n                rel.x = o.x ? o.x - point.x : point.x;\n                if (!hasRot) {\n                  rel.y = 0;\n                } else {\n                  rel.y = o.y ? o.y - point.y : point.y;\n                }\n                middle.x = left ? width - rel.x / 2 : point.x + rel.x / 2;\n                middle.y = rel.y / 2;\n                var alpha = A90 - Math.atan2(rel.y, rel.x),\n                  gamma = alpha - Math.atan2(middle.y, middle.x),\n                  distance = Math.max(0, Math.sin(gamma) * Math.sqrt(Math.pow(middle.x, 2) + Math.pow(middle.y, 2)));\n                a = deg(alpha);\n                tr = point2D(distance * Math.sin(alpha), distance * Math.cos(alpha));\n                if (alpha > A90) {\n                  tr.x = tr.x + Math.abs(tr.y * rel.y / rel.x);\n                  tr.y = 0;\n                  if (Math.round(tr.x * Math.tan(PI - alpha)) < height) {\n                    point.y = Math.sqrt(Math.pow(height, 2) + 2 * middle.x * rel.x);\n                    if (top) point.y = height - point.y;\n                    return compute();\n                  }\n                }\n                if (alpha > A90) {\n                  var beta = PI - alpha,\n                    dd = h - height / Math.sin(beta);\n                  mv = point2D(Math.round(dd * Math.cos(beta)), Math.round(dd * Math.sin(beta)));\n                  if (left) mv.x = -mv.x;\n                  if (top) mv.y = -mv.y;\n                }\n                px = Math.round(tr.y / Math.tan(alpha) + tr.x);\n                var side = width - px,\n                  sideX = side * Math.cos(alpha * 2),\n                  sideY = side * Math.sin(alpha * 2);\n                df = point2D(Math.round(left ? side - sideX : px + sideX), Math.round(top ? sideY : height - sideY));\n\n                // Gradients\n                if (turnData.opts.gradients) {\n                  gradientSize = side * Math.sin(alpha);\n                  var endingPoint = flipMethods._c2.call(that, point.corner),\n                    far = Math.sqrt(Math.pow(endingPoint.x - point.x, 2) + Math.pow(endingPoint.y - point.y, 2)) / width;\n                  shadowVal = Math.sin(A90 * (far > 1 ? 2 - far : far));\n                  gradientOpacity = Math.min(far, 1);\n                  gradientStartVal = gradientSize > 100 ? (gradientSize - 100) / gradientSize : 0;\n                  gradientEndPointA = point2D(gradientSize * Math.sin(alpha) / width * 100, gradientSize * Math.cos(alpha) / height * 100);\n                  if (flipMethods._backGradient.call(that)) {\n                    gradientEndPointB = point2D(gradientSize * 1.2 * Math.sin(alpha) / width * 100, gradientSize * 1.2 * Math.cos(alpha) / height * 100);\n                    if (!left) gradientEndPointB.x = 100 - gradientEndPointB.x;\n                    if (!top) gradientEndPointB.y = 100 - gradientEndPointB.y;\n                  }\n                }\n                tr.x = Math.round(tr.x);\n                tr.y = Math.round(tr.y);\n                return true;\n              },\n              transform = function (tr, c, x, a) {\n                var f = ['0', 'auto'],\n                  mvW = (width - h) * x[0] / 100,\n                  mvH = (height - h) * x[1] / 100,\n                  cssA = {\n                    left: f[c[0]],\n                    top: f[c[1]],\n                    right: f[c[2]],\n                    bottom: f[c[3]]\n                  },\n                  cssB = {},\n                  aliasingFk = a != 90 && a != -90 ? left ? -1 : 1 : 0,\n                  origin = x[0] + '% ' + x[1] + '%';\n                that.css(cssA).transform(rotate(a) + translate(tr.x + aliasingFk, tr.y, ac), origin);\n                data.fpage.css(cssA).transform(rotate(a) + translate(tr.x + df.x - mv.x - width * x[0] / 100, tr.y + df.y - mv.y - height * x[1] / 100, ac) + rotate((180 / a - 2) * a), origin);\n                data.wrapper.transform(translate(-tr.x + mvW - aliasingFk, -tr.y + mvH, ac) + rotate(-a), origin);\n                data.fwrapper.transform(translate(-tr.x + mv.x + mvW, -tr.y + mv.y + mvH, ac) + rotate(-a), origin);\n                if (turnData.opts.gradients) {\n                  if (x[0]) gradientEndPointA.x = 100 - gradientEndPointA.x;\n                  if (x[1]) gradientEndPointA.y = 100 - gradientEndPointA.y;\n                  cssB['box-shadow'] = '0 0 20px rgba(0,0,0,' + 0.5 * shadowVal + ')';\n                  folding.css(cssB);\n                  gradient(data.ashadow, point2D(left ? 100 : 0, top ? 0 : 100), point2D(gradientEndPointA.x, gradientEndPointA.y), [[gradientStartVal, 'rgba(0,0,0,0)'], [(1 - gradientStartVal) * 0.8 + gradientStartVal, 'rgba(0,0,0,' + 0.2 * gradientOpacity + ')'], [1, 'rgba(255,255,255,' + 0.2 * gradientOpacity + ')']], 3, alpha);\n                  if (flipMethods._backGradient.call(that)) gradient(data.bshadow, point2D(left ? 0 : 100, top ? 0 : 100), point2D(gradientEndPointB.x, gradientEndPointB.y), [[0.6, 'rgba(0,0,0,0)'], [0.8, 'rgba(0,0,0,' + 0.3 * gradientOpacity + ')'], [1, 'rgba(0,0,0,0)']], 3);\n                }\n              };\n            switch (point.corner) {\n              case 'l':\n                break;\n              case 'r':\n                break;\n              case 'tl':\n                point.x = Math.max(point.x, 1);\n                compute();\n                transform(tr, [1, 0, 0, 1], [100, 0], a);\n                break;\n              case 'tr':\n                point.x = Math.min(point.x, width - 1);\n                compute();\n                transform(point2D(-tr.x, tr.y), [0, 0, 0, 1], [0, 0], -a);\n                break;\n              case 'bl':\n                point.x = Math.max(point.x, 1);\n                compute();\n                transform(point2D(tr.x, -tr.y), [1, 1, 0, 0], [100, 100], -a);\n                break;\n              case 'br':\n                point.x = Math.min(point.x, width - 1);\n                compute();\n                transform(point2D(-tr.x, -tr.y), [0, 1, 1, 0], [0, 100], a);\n                break;\n            }\n            break;\n        }\n        data.point = point;\n      },\n      _moveFoldingPage: function (move) {\n        var data = this.data().f;\n        if (!data) return;\n        var turn = data.opts.turn,\n          turnData = turn.data(),\n          place = turnData.pagePlace;\n        if (move) {\n          var nextPage = data.opts.next;\n          if (place[nextPage] != data.opts.page) {\n            if (data.folding) flipMethods._moveFoldingPage.call(this, false);\n            var folding = flipMethods._foldingPage.call(this);\n            folding.appendTo(data.fpage);\n            place[nextPage] = data.opts.page;\n            data.folding = nextPage;\n          }\n          turn.turn('update');\n        } else {\n          if (data.folding) {\n            if (turnData.pages[data.folding]) {\n              // If we have flip available\n\n              var flipData = turnData.pages[data.folding].data().f;\n              turnData.pageObjs[data.folding].appendTo(flipData.wrapper);\n            } else if (turnData.pageWrap[data.folding]) {\n              // If we have the pageWrapper\n\n              turnData.pageObjs[data.folding].appendTo(turnData.pageWrap[data.folding]);\n            }\n            if (data.folding in place) {\n              place[data.folding] = data.folding;\n            }\n            delete data.folding;\n          }\n        }\n      },\n      _showFoldedPage: function (c, animate) {\n        var folding = flipMethods._foldingPage.call(this),\n          dd = this.data(),\n          data = dd.f,\n          visible = data.visible;\n        if (folding) {\n          if (!visible || !data.point || data.point.corner != c.corner) {\n            var corner = data.status == 'hover' || data.status == 'peel' || data.opts.turn.data().mouseAction ? c.corner : null;\n            visible = false;\n            if (trigger('start', this, [data.opts, corner]) == 'prevented') return false;\n          }\n          if (animate) {\n            var that = this,\n              point = data.point && data.point.corner == c.corner ? data.point : flipMethods._c.call(this, c.corner, 1);\n            this.animatef({\n              from: [point.x, point.y],\n              to: [c.x, c.y],\n              duration: 500,\n              frame: function (v) {\n                c.x = Math.round(v[0]);\n                c.y = Math.round(v[1]);\n                flipMethods._fold.call(that, c);\n              }\n            });\n          } else {\n            flipMethods._fold.call(this, c);\n            if (dd.effect && !dd.effect.turning) this.animatef(false);\n          }\n          if (!visible) {\n            switch (data.effect) {\n              case 'hard':\n                data.visible = true;\n                flipMethods._moveFoldingPage.call(this, true);\n                data.fpage.show();\n                if (data.opts.shadows) data.bshadow.show();\n                break;\n              case 'sheet':\n                data.visible = true;\n                data.fparent.show().data().flips++;\n                flipMethods._moveFoldingPage.call(this, true);\n                data.fwrapper.show();\n                if (data.bshadow) data.bshadow.show();\n                break;\n            }\n          }\n          return true;\n        }\n        return false;\n      },\n      hide: function () {\n        var data = this.data().f,\n          turnData = data.opts.turn.data(),\n          folding = flipMethods._foldingPage.call(this);\n        switch (data.effect) {\n          case 'hard':\n            if (turnData.opts.gradients) {\n              data.bshadowLoc = 0;\n              data.bshadow.remove();\n              data.ashadow.hide();\n            }\n            data.wrapper.transform('');\n            data.fpage.hide();\n            break;\n          case 'sheet':\n            if (--data.fparent.data().flips === 0) data.fparent.hide();\n            this.css({\n              left: 0,\n              top: 0,\n              right: 'auto',\n              bottom: 'auto'\n            }).transform('');\n            data.wrapper.transform('');\n            data.fwrapper.hide();\n            if (data.bshadow) data.bshadow.hide();\n            folding.transform('');\n            break;\n        }\n        data.visible = false;\n        return this;\n      },\n      hideFoldedPage: function (animate) {\n        var data = this.data().f;\n        if (!data.point) return;\n        var that = this,\n          p1 = data.point,\n          hide = function () {\n            data.point = null;\n            data.status = '';\n            that.flip('hide');\n            that.trigger('end', [data.opts, false]);\n          };\n        if (animate) {\n          var p4 = flipMethods._c.call(this, p1.corner),\n            top = p1.corner.substr(0, 1) == 't',\n            delta = top ? Math.min(0, p1.y - p4.y) / 2 : Math.max(0, p1.y - p4.y) / 2,\n            p2 = point2D(p1.x, p1.y + delta),\n            p3 = point2D(p4.x, p4.y - delta);\n          this.animatef({\n            from: 0,\n            to: 1,\n            frame: function (v) {\n              var np = bezier(p1, p2, p3, p4, v);\n              p1.x = np.x;\n              p1.y = np.y;\n              flipMethods._fold.call(that, p1);\n            },\n            complete: hide,\n            duration: 800,\n            hiding: true\n          });\n        } else {\n          this.animatef(false);\n          hide();\n        }\n      },\n      turnPage: function (corner) {\n        var that = this,\n          data = this.data().f,\n          turnData = data.opts.turn.data();\n        corner = {\n          corner: data.corner ? data.corner.corner : corner || flipMethods._cAllowed.call(this)[0]\n        };\n        var p1 = data.point || flipMethods._c.call(this, corner.corner, data.opts.turn ? turnData.opts.elevation : 0),\n          p4 = flipMethods._c2.call(this, corner.corner);\n        this.trigger('flip').animatef({\n          from: 0,\n          to: 1,\n          frame: function (v) {\n            var np = bezier(p1, p1, p4, p4, v);\n            corner.x = np.x;\n            corner.y = np.y;\n            flipMethods._showFoldedPage.call(that, corner);\n          },\n          complete: function () {\n            that.trigger('end', [data.opts, true]);\n          },\n          duration: turnData.opts.duration,\n          turning: true\n        });\n        data.corner = null;\n      },\n      moving: function () {\n        return 'effect' in this.data();\n      },\n      isTurning: function () {\n        return this.flip('moving') && this.data().effect.turning;\n      },\n      corner: function () {\n        return this.data().f.corner;\n      },\n      _eventStart: function (e) {\n        var data = this.data().f,\n          turn = data.opts.turn;\n        if (!data.corner && !data.disabled && !this.flip('isTurning') && data.opts.page == turn.data().pagePlace[data.opts.page]) {\n          data.corner = flipMethods._isIArea.call(this, e);\n          if (data.corner && flipMethods._foldingPage.call(this)) {\n            this.trigger('pressed', [data.point]);\n            flipMethods._showFoldedPage.call(this, data.corner);\n            return false;\n          } else data.corner = null;\n        }\n      },\n      _eventMove: function (e) {\n        var data = this.data().f;\n        if (!data.disabled) {\n          e = isTouch ? e.originalEvent.touches : [e];\n          if (data.corner) {\n            var pos = data.parent.offset();\n            data.corner.x = e[0].pageX - pos.left;\n            data.corner.y = e[0].pageY - pos.top;\n            flipMethods._showFoldedPage.call(this, data.corner);\n          } else if (data.hover && !this.data().effect && this.is(':visible')) {\n            var point = flipMethods._isIArea.call(this, e[0]);\n            if (point) {\n              if (data.effect == 'sheet' && point.corner.length == 2 || data.effect == 'hard') {\n                data.status = 'hover';\n                var origin = flipMethods._c.call(this, point.corner, data.opts.cornerSize / 2);\n                point.x = origin.x;\n                point.y = origin.y;\n                flipMethods._showFoldedPage.call(this, point, true);\n              }\n            } else {\n              if (data.status == 'hover') {\n                data.status = '';\n                flipMethods.hideFoldedPage.call(this, true);\n              }\n            }\n          }\n        }\n      },\n      _eventEnd: function () {\n        var data = this.data().f,\n          corner = data.corner;\n        if (!data.disabled && corner) {\n          if (trigger('released', this, [data.point || corner]) != 'prevented') {\n            flipMethods.hideFoldedPage.call(this, true);\n          }\n        }\n        data.corner = null;\n      },\n      disable: function (disable) {\n        flipMethods.setData.call(this, {\n          'disabled': disable\n        });\n        return this;\n      },\n      hover: function (hover) {\n        flipMethods.setData.call(this, {\n          'hover': hover\n        });\n        return this;\n      },\n      peel: function (corner, animate) {\n        var data = this.data().f;\n        if (corner) {\n          if ($.inArray(corner, corners.all) == -1) throw turnError('Corner ' + corner + ' is not permitted');\n          if ($.inArray(corner, flipMethods._cAllowed.call(this)) != -1) {\n            var point = flipMethods._c.call(this, corner, data.opts.cornerSize / 2);\n            data.status = 'peel';\n            flipMethods._showFoldedPage.call(this, {\n              corner: corner,\n              x: point.x,\n              y: point.y\n            }, animate);\n          }\n        } else {\n          data.status = '';\n          flipMethods.hideFoldedPage.call(this, animate);\n        }\n        return this;\n      }\n    };\n\n  // Processes classes\n\n  function dec(that, methods, args) {\n    if (!args[0] || typeof args[0] == 'object') return methods.init.apply(that, args);else if (methods[args[0]]) return methods[args[0]].apply(that, Array.prototype.slice.call(args, 1));else throw turnError(args[0] + ' is not a method or property');\n  }\n\n  // Attributes for a layer\n\n  function divAtt(top, left, zIndex, overf) {\n    return {\n      'css': {\n        position: 'absolute',\n        top: top,\n        left: left,\n        'overflow': overf || 'hidden',\n        zIndex: zIndex || 'auto'\n      }\n    };\n  }\n\n  // Gets a 2D point from a bezier curve of four points\n\n  function bezier(p1, p2, p3, p4, t) {\n    var a = 1 - t,\n      b = a * a * a,\n      c = t * t * t;\n    return point2D(Math.round(b * p1.x + 3 * t * a * a * p2.x + 3 * t * t * a * p3.x + c * p4.x), Math.round(b * p1.y + 3 * t * a * a * p2.y + 3 * t * t * a * p3.y + c * p4.y));\n  }\n\n  // Converts an angle from degrees to radians\n\n  function rad(degrees) {\n    return degrees / 180 * PI;\n  }\n\n  // Converts an angle from radians to degrees\n\n  function deg(radians) {\n    return radians / PI * 180;\n  }\n\n  // Gets a 2D point\n\n  function point2D(x, y) {\n    return {\n      x: x,\n      y: y\n    };\n  }\n\n  // Webkit 534.3 on Android wrongly repaints elements that use overflow:hidden + rotation\n\n  function rotationAvailable() {\n    var parts;\n    if (parts = /AppleWebkit\\/([0-9\\.]+)/i.exec(navigator.userAgent)) {\n      var webkitVersion = parseFloat(parts[1]);\n      return webkitVersion > 534.3;\n    } else {\n      return true;\n    }\n  }\n\n  // Returns the traslate value\n\n  function translate(x, y, use3d) {\n    return has3d && use3d ? ' translate3d(' + x + 'px,' + y + 'px, 0px) ' : ' translate(' + x + 'px, ' + y + 'px) ';\n  }\n\n  // Returns the rotation value\n\n  function rotate(degrees) {\n    return ' rotate(' + degrees + 'deg) ';\n  }\n\n  // Checks if a property belongs to an object\n\n  function has(property, object) {\n    return Object.prototype.hasOwnProperty.call(object, property);\n  }\n\n  // Gets the CSS3 vendor prefix\n\n  function getPrefix() {\n    var vendorPrefixes = ['Moz', 'Webkit', 'Khtml', 'O', 'ms'],\n      len = vendorPrefixes.length,\n      vendor = '';\n    while (len--) if (vendorPrefixes[len] + 'Transform' in document.body.style) vendor = '-' + vendorPrefixes[len].toLowerCase() + '-';\n    return vendor;\n  }\n\n  // Detects the transitionEnd Event\n\n  function getTransitionEnd() {\n    var t,\n      el = document.createElement('fakeelement'),\n      transitions = {\n        'transition': 'transitionend',\n        'OTransition': 'oTransitionEnd',\n        'MSTransition': 'transitionend',\n        'MozTransition': 'transitionend',\n        'WebkitTransition': 'webkitTransitionEnd'\n      };\n    for (t in transitions) {\n      if (el.style[t] !== undefined) {\n        return transitions[t];\n      }\n    }\n  }\n\n  // Gradients\n\n  function gradient(obj, p0, p1, colors, numColors) {\n    var j,\n      cols = [];\n    if (vendor == '-webkit-') {\n      for (j = 0; j < numColors; j++) cols.push('color-stop(' + colors[j][0] + ', ' + colors[j][1] + ')');\n      obj.css({\n        'background-image': '-webkit-gradient(linear, ' + p0.x + '% ' + p0.y + '%,' + p1.x + '% ' + p1.y + '%, ' + cols.join(',') + ' )'\n      });\n    } else {\n      p0 = {\n        x: p0.x / 100 * obj.width(),\n        y: p0.y / 100 * obj.height()\n      };\n      p1 = {\n        x: p1.x / 100 * obj.width(),\n        y: p1.y / 100 * obj.height()\n      };\n      var dx = p1.x - p0.x,\n        dy = p1.y - p0.y,\n        angle = Math.atan2(dy, dx),\n        angle2 = angle - Math.PI / 2,\n        diagonal = Math.abs(obj.width() * Math.sin(angle2)) + Math.abs(obj.height() * Math.cos(angle2)),\n        gradientDiagonal = Math.sqrt(dy * dy + dx * dx),\n        corner = point2D(p1.x < p0.x ? obj.width() : 0, p1.y < p0.y ? obj.height() : 0),\n        slope = Math.tan(angle),\n        inverse = -1 / slope,\n        x = (inverse * corner.x - corner.y - slope * p0.x + p0.y) / (inverse - slope),\n        c = {\n          x: x,\n          y: inverse * x - inverse * corner.x + corner.y\n        },\n        segA = Math.sqrt(Math.pow(c.x - p0.x, 2) + Math.pow(c.y - p0.y, 2));\n      for (j = 0; j < numColors; j++) cols.push(' ' + colors[j][1] + ' ' + (segA + gradientDiagonal * colors[j][0]) * 100 / diagonal + '%');\n      obj.css({\n        'background-image': vendor + 'linear-gradient(' + -angle + 'rad,' + cols.join(',') + ')'\n      });\n    }\n  }\n\n  // Triggers an event\n\n  function trigger(eventName, context, args) {\n    var event = $.Event(eventName);\n    context.trigger(event, args);\n    if (event.isDefaultPrevented()) return 'prevented';else if (event.isPropagationStopped()) return 'stopped';else return '';\n  }\n\n  // JS Errors\n\n  function turnError(message) {\n    function TurnJsError(message) {\n      this.name = \"TurnJsError\";\n      this.message = message;\n    }\n    TurnJsError.prototype = new Error();\n    TurnJsError.prototype.constructor = TurnJsError;\n    return new TurnJsError(message);\n  }\n\n  // Find the offset of an element ignoring its transformation\n\n  function findPos(obj) {\n    var offset = {\n      top: 0,\n      left: 0\n    };\n    do {\n      offset.left += obj.offsetLeft;\n      offset.top += obj.offsetTop;\n    } while (obj = obj.offsetParent);\n    return offset;\n  }\n\n  // Checks if there's hard page compatibility\n  // IE9 is the only browser that does not support hard pages\n\n  function hasHardPage() {\n    return navigator.userAgent.indexOf('MSIE 9.0') == -1;\n  }\n\n  // Request an animation\n\n  window.requestAnim = function () {\n    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function (callback) {\n      window.setTimeout(callback, 1000 / 60);\n    };\n  }();\n\n  // Extend $.fn\n\n  $.extend($.fn, {\n    flip: function () {\n      return dec($(this[0]), flipMethods, arguments);\n    },\n    turn: function () {\n      return dec($(this[0]), turnMethods, arguments);\n    },\n    transform: function (transform, origin) {\n      var properties = {};\n      if (origin) properties[vendor + 'transform-origin'] = origin;\n      properties[vendor + 'transform'] = transform;\n      return this.css(properties);\n    },\n    animatef: function (point) {\n      var data = this.data();\n      if (data.effect) data.effect.stop();\n      if (point) {\n        if (!point.to.length) point.to = [point.to];\n        if (!point.from.length) point.from = [point.from];\n        var diff = [],\n          len = point.to.length,\n          animating = true,\n          that = this,\n          time = new Date().getTime(),\n          frame = function () {\n            if (!data.effect || !animating) return;\n            var v = [],\n              timeDiff = Math.min(point.duration, new Date().getTime() - time);\n            for (var i = 0; i < len; i++) v.push(data.effect.easing(1, timeDiff, point.from[i], diff[i], point.duration));\n            point.frame(len == 1 ? v[0] : v);\n            if (timeDiff == point.duration) {\n              delete data['effect'];\n              that.data(data);\n              if (point.complete) point.complete();\n            } else {\n              window.requestAnim(frame);\n            }\n          };\n        for (var i = 0; i < len; i++) diff.push(point.to[i] - point.from[i]);\n        data.effect = $.extend({\n          stop: function () {\n            animating = false;\n          },\n          easing: function (x, t, b, c, data) {\n            return c * Math.sqrt(1 - (t = t / data - 1) * t) + b;\n          }\n        }, point);\n        this.data(data);\n        frame();\n      } else {\n        delete data['effect'];\n      }\n    }\n  });\n\n  // Export some globals\n\n  $.isTouch = isTouch;\n  $.mouseEvents = mouseEvents;\n  $.cssPrefix = getPrefix;\n  $.cssTransitionEnd = getTransitionEnd;\n  $.findPos = findPos;\n})(jQuery);","map":{"version":3,"names":["$","has3d","hasRot","vendor","version","PI","Math","A90","isTouch","window","mouseEvents","down","move","up","over","out","corners","backward","forward","all","displays","directions","turnOptions","acceleration","display","duration","page","gradients","turnCorners","when","flipOptions","cornerSize","pagesInDOM","turnMethods","init","options","document","body","style","rotationAvailable","getPrefix","i","that","pageNum","data","ch","children","extend","width","height","direction","attr","css","opts","pageObjs","pages","pageWrap","pageZoom","pagePlace","pageMv","zoom","totalPages","eventHandlers","touchStart","proxy","_touchStart","touchMove","_touchMove","touchEnd","_touchEnd","start","_eventStart","has","bind","position","turn","transform","translate","length","_eventEnd","_eventPressed","_eventReleased","_flip","parent","done","addPage","element","currentPage","className","incPages","lastPage","destroying","exec","parseInt","turnError","_movePages","call","addClass","hasHardPage","hasClass","removeClass","_addPage","_removeFromDOM","_necessPage","overflow","append","appendTo","prop","_pageSize","_makeFlip","remove","hasPage","center","size","left","noCenter","view","tpage","marginLeft","destroy","flipbook","events","trigger","each","index","eventName","unbind","fparent","shadow","removeData","is","newZoom","currentView","iz","newWidth","round","newHeight","autoCenter","_updateShadow","top","right","pageWidth","pageHeight","odd","single","flip","next","disabled","_setPageLoc","_makeRange","range","remainingPages","_view","floor","min","max","_removePageFromDOM","dd","flipMethods","_moveFoldingPage","f","fwrapper","_removeMv","removePage","_fitPage","from","change","currentDisplay","undefined","inArray","dir","toLowerCase","animating","corner","disable","resize","splice","_addMv","push","stop","ignore","animate","force","_missing","p","missing","newView","_turnPage","current","place","optsCorners","split","flipData","actualPoint","point","effect","pop","previous","shift","peel","indexOf","_addMotionPage","e","actualZoom","isDefaultPrevented","charAt","target","turned","turnData","mouseAction","time","Date","getTime","outArea","x","preventDefault","stopPropagation","apply","arguments","_eventMove","calculateZ","mv","nextPage","placePage","dpage","total","r","pageZ","partZ","pageV","addView","abs","update","apage","fixed","pos","actualView","zIndex","pageLocation","view2","divAtt","loc","hover","_addPageWrapper","setData","d","z","_cAllowed","_cornerActivated","y","csz","allowedCorners","_isIArea","offset","originalEvent","touches","pageX","pageY","_c","point2D","_c2","_foldingPage","_backGradient","gradient","bshadow","type","full","wrapper","fpage","ashadow","sqrt","pow","findPos","att","cssProperties","prepend","hide","flips","bottom","cursor","_fold","o","leftPos","gradientX","fpageOrigin","parentOrigin","parentCss","relX","angle","half","backgroundColor","opacity","a","alpha","beta","px","gradientEndPointA","gradientEndPointB","gradientStartVal","gradientSize","gradientOpacity","shadowVal","df","tr","folding","tan","ac","h","substr","compute","rel","middle","atan2","gamma","distance","sin","deg","cos","side","sideX","sideY","endingPoint","far","c","mvW","mvH","cssA","cssB","aliasingFk","origin","rotate","_showFoldedPage","visible","status","animatef","to","frame","v","turning","show","shadows","bshadowLoc","hideFoldedPage","p1","p4","delta","p2","p3","np","bezier","complete","hiding","turnPage","elevation","moving","isTurning","dec","methods","args","Array","prototype","slice","overf","t","b","rad","degrees","radians","parts","navigator","userAgent","webkitVersion","parseFloat","use3d","property","object","Object","hasOwnProperty","vendorPrefixes","len","getTransitionEnd","el","createElement","transitions","obj","p0","colors","numColors","j","cols","join","dx","dy","angle2","diagonal","gradientDiagonal","slope","inverse","segA","context","event","Event","isPropagationStopped","message","TurnJsError","name","Error","constructor","offsetLeft","offsetTop","offsetParent","requestAnim","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","fn","properties","diff","timeDiff","easing","cssPrefix","cssTransitionEnd","jQuery"],"sources":["C:/Users/Syahrul/PKM/test-react/portfolio-alpha/src/lib/turn.js"],"sourcesContent":["/**\n * turn.js 4th release\n * turnjs.com\n * turnjs.com/license.txt\n *\n * Copyright (C) 2012 Emmanuel Garcia\n * All rights reserved\n **/\n\n(function($) {\n\n'use strict';\n\nvar has3d,\n  \n  hasRot,\n\n  vendor = '',\n  \n  version = '4.1.0',\n\n  PI = Math.PI,\n\n  A90 = PI/2,\n\n  isTouch = 'ontouchstart' in window,\n\n  mouseEvents = (isTouch) ?\n    {\n      down: 'touchstart',\n      move: 'touchmove',\n      up: 'touchend',\n      over: 'touchstart',\n      out: 'touchend'\n    }\n    :\n    {\n      down: 'mousedown',\n      move: 'mousemove',\n      up: 'mouseup',\n      over: 'mouseover',\n      out: 'mouseout'\n    },\n\n  // Contansts used for each corner\n  //   | tl * tr |\n  // l | *     * | r\n  //   | bl * br |\n\n  corners = {\n    backward: ['bl', 'tl'],\n    forward: ['br', 'tr'],\n    all: ['tl', 'bl', 'tr', 'br', 'l', 'r']\n  },\n\n  // Display values\n\n  displays = ['single', 'double'],\n\n  // Direction values\n\n  directions = ['ltr', 'rtl'],\n\n  // Default options\n\n  turnOptions = {\n\n    // Enables hardware acceleration\n\n    acceleration: true,\n\n    // Display\n\n    display: 'double',\n\n    // Duration of transition in milliseconds\n\n    duration: 600,\n\n    // First page\n\n    page: 1,\n    \n    // Enables gradients\n\n    gradients: true,\n\n    // Corners used when turning the page\n\n    turnCorners: 'bl,br',\n\n    // Events\n\n    when: null\n  },\n\n  flipOptions = {\n\n    // Size of the active zone of each corner\n\n    cornerSize: 100\n\n  },\n\n  // Number of pages in the DOM, minimum value: 6\n\n  pagesInDOM = 6,\n  \n\nturnMethods = {\n\n  // Singleton constructor\n  // $('#selector').turn([options]);\n\n  init: function(options) {\n\n    // Define constants\n    \n    has3d = 'WebKitCSSMatrix' in window || 'MozPerspective' in document.body.style;\n    hasRot = rotationAvailable();\n    vendor = getPrefix();\n\n    var i, that = this, pageNum = 0, data = this.data(), ch = this.children();\n\n    // Set initial configuration\n\n    options = $.extend({\n      width: this.width(),\n      height: this.height(),\n      direction: this.attr('dir') || this.css('direction') || 'ltr'\n    }, turnOptions, options);\n\n    data.opts = options;\n    data.pageObjs = {};\n    data.pages = {};\n    data.pageWrap = {};\n    data.pageZoom = {};\n    data.pagePlace = {};\n    data.pageMv = [];\n    data.zoom = 1;\n    data.totalPages = options.pages || 0;\n    data.eventHandlers = {\n      touchStart: $.proxy(turnMethods._touchStart, this),\n      touchMove: $.proxy(turnMethods._touchMove, this),\n      touchEnd: $.proxy(turnMethods._touchEnd, this),\n      start: $.proxy(turnMethods._eventStart, this)\n    };\n\n\n\n    // Add event listeners\n\n    if (options.when)\n      for (i in options.when)\n        if (has(i, options.when))\n          this.bind(i, options.when[i]);\n\n    // Set the css\n\n    this.css({position: 'relative', width: options.width, height: options.height});\n\n    // Set the initial display\n\n    this.turn('display', options.display);\n\n    // Set the direction\n\n    if (options.direction!=='')\n      this.turn('direction', options.direction);\n    \n    // Prevent blue screen problems of switching to hardware acceleration mode\n    // By forcing hardware acceleration for ever\n\n    if (has3d && !isTouch && options.acceleration)\n      this.transform(translate(0, 0, true));\n\n    // Add pages from the DOM\n\n    for (i = 0; i<ch.length; i++) {\n      if ($(ch[i]).attr('ignore')!='1') {\n        this.turn('addPage', ch[i], ++pageNum);\n      }\n    }\n\n    // Event listeners\n\n    $(this).bind(mouseEvents.down, data.eventHandlers.touchStart).\n      bind('end', turnMethods._eventEnd).\n      bind('pressed', turnMethods._eventPressed).\n      bind('released', turnMethods._eventReleased).\n      bind('flip', turnMethods._flip);\n\n    $(this).parent().bind('start', data.eventHandlers.start);\n\n    $(document).bind(mouseEvents.move, data.eventHandlers.touchMove).\n      bind(mouseEvents.up, data.eventHandlers.touchEnd);\n\n    // Set the initial page\n\n    this.turn('page', options.page);\n\n    // This flipbook is ready\n\n    data.done = true;\n\n    return this;\n  },\n\n  // Adds a page from external data\n\n  addPage: function(element, page) {\n\n    var currentPage,\n      className,\n      incPages = false,\n      data = this.data(),\n      lastPage = data.totalPages+1;\n\n    if (data.destroying)\n      return false;\n\n    // Read the page number from the className of `element` - format: p[0-9]+\n\n    if ((currentPage = /\\bp([0-9]+)\\b/.exec($(element).attr('class'))))\n      page = parseInt(currentPage[1], 10);\n\n    if (page) {\n      \n      if (page==lastPage)\n        incPages = true;\n      else if (page>lastPage)\n        throw turnError('Page \"'+page+'\" cannot be inserted');\n\n    } else {\n      \n      page = lastPage;\n      incPages = true;\n\n    }\n\n    if (page>=1 && page<=lastPage) {\n\n      if (data.display=='double')\n        className = (page%2) ? ' odd' : ' even';\n      else\n        className = '';\n\n      // Stop animations\n      if (data.done)\n        this.turn('stop');\n\n      // Move pages if it's necessary\n      if (page in data.pageObjs)\n        turnMethods._movePages.call(this, page, 1);\n\n      // Increase the number of pages\n      if (incPages)\n        data.totalPages = lastPage;\n\n      // Add element\n      data.pageObjs[page] = $(element).\n        css({'float': 'left'}).\n        addClass('page p' + page + className);\n\n      if (!hasHardPage() &&  data.pageObjs[page].hasClass('hard')) {\n        data.pageObjs[page].removeClass('hard');\n      }\n\n      // Add page\n      turnMethods._addPage.call(this, page);\n\n      // Remove pages out of range\n      turnMethods._removeFromDOM.call(this);\n    }\n\n    return this;\n  },\n\n  // Adds a page\n\n  _addPage: function(page) {\n    \n    var data = this.data(),\n      element = data.pageObjs[page];\n\n    if (element)\n      if (turnMethods._necessPage.call(this, page)) {\n\n        if (!data.pageWrap[page]) {\n\n          // Wrapper\n          data.pageWrap[page] = $('<div/>',\n            {'class': 'page-wrapper',\n              page: page,\n              css: {position: 'absolute',\n              overflow: 'hidden'}});\n\n          // Append to this flipbook\n          this.append(data.pageWrap[page]);\n\n          if (!data.pagePlace[page]) {\n            \n            data.pagePlace[page] = page;\n            // Move `pageObjs[page]` to wrapper\n            data.pageObjs[page].appendTo(data.pageWrap[page]);\n          \n         }\n\n          // Set the size of the page\n          var prop = turnMethods._pageSize.call(this, page, true);\n          element.css({width: prop.width, height: prop.height});\n          data.pageWrap[page].css(prop);\n\n        }\n\n        if (data.pagePlace[page] == page) {\n\n         // If the page isn't in another place, create the flip effect\n          turnMethods._makeFlip.call(this, page);\n\n      }\n        \n      } else {\n\n        // Place\n        data.pagePlace[page] = 0;\n\n        // Remove element from the DOM\n        if (data.pageObjs[page])\n          data.pageObjs[page].remove();\n\n      }\n\n  },\n\n  // Checks if a page is in memory\n  \n  hasPage: function(page) {\n\n    return has(page, this.data().pageObjs);\n  \n  },\n\n  // Centers the flipbook\n\n  center: function(page) {\n    \n    var data = this.data(),\n      size = $(this).turn('size'),\n      left = 0;\n\n    if (!data.noCenter) {\n      if (data.display=='double') {\n        var view = this.turn('view', page || data.tpage || data.page);\n\n        if (data.direction=='ltr') {\n          if (!view[0])\n            left -= size.width/4;\n          else if (!view[1])\n            left += size.width/4;\n        } else {\n          if (!view[0])\n            left += size.width/4;\n          else if (!view[1])\n            left -= size.width/4;\n        }\n      \n      }\n\n      $(this).css({marginLeft: left});\n    }\n\n    return this;\n\n  },\n\n  // Destroys the flipbook\n\n  destroy: function () {\n\n    var page,\n      flipbook = this,\n      data = this.data(),\n      events = [\n        'end', 'first', 'flip', 'last', 'pressed',\n        'released', 'start', 'turning', 'turned',\n        'zooming', 'missing'];\n\n    if (trigger('destroying', this)=='prevented')\n      return;\n\n    data.destroying = true;\n\n    $.each(events, function(index, eventName) {\n      flipbook.unbind(eventName);\n    });\n\n    this.parent().unbind('start', data.eventHandlers.start);\n\n    $(document).unbind(mouseEvents.move, data.eventHandlers.touchMove).\n      unbind(mouseEvents.up, data.eventHandlers.touchEnd);\n    \n    while (data.totalPages!==0) {\n      this.turn('removePage', data.totalPages);\n    }\n\n    if (data.fparent)\n      data.fparent.remove();\n\n    if (data.shadow)\n      data.shadow.remove();\n\n    this.removeData();\n    data = null;\n\n    return this;\n\n  },\n\n  // Checks if this element is a flipbook\n\n  is: function() {\n\n    return typeof(this.data().pages)=='object';\n\n  },\n\n  // Sets and gets the zoom value\n\n  zoom: function(newZoom) {\n    \n    var data = this.data();\n\n    if (typeof(newZoom)=='number') {\n\n      if (newZoom<0.001 || newZoom>100)\n        throw turnError(newZoom+ ' is not a value for zoom');\n      \n      if (trigger('zooming', this, [newZoom, data.zoom])=='prevented')\n        return this;\n      \n      var size = this.turn('size'),\n        currentView = this.turn('view'),\n        iz = 1/data.zoom,\n        newWidth = Math.round(size.width * iz * newZoom),\n        newHeight = Math.round(size.height * iz * newZoom);\n    \n      data.zoom = newZoom;\n\n      $(this).turn('stop').\n        turn('size', newWidth, newHeight);\n        /*.\n        css({marginTop: size.height * iz / 2 - newHeight / 2});*/\n\n      if (data.opts.autoCenter)\n        this.turn('center');\n      /*else\n        $(this).css({marginLeft: size.width * iz / 2 - newWidth / 2});*/\n\n      turnMethods._updateShadow.call(this);\n\n      for (var i = 0; i<currentView.length; i++) {\n        if (currentView[i] && data.pageZoom[currentView[i]]!=data.zoom) {\n  \n          this.trigger('zoomed',[\n            currentView[i],\n            currentView,\n            data.pageZoom[currentView[i]],\n            data.zoom]);\n\n          data.pageZoom[currentView[i]] = data.zoom;\n      }\n    }\n\n      return this;\n\n    } else\n      return data.zoom;\n\n  },\n\n  // Gets the size of a page\n\n  _pageSize: function(page, position) {\n\n    var data = this.data(),\n      prop = {};\n\n    if (data.display=='single') {\n\n      prop.width = this.width();\n      prop.height = this.height();\n\n      if (position) {\n        prop.top = 0;\n        prop.left = 0;\n        prop.right = 'auto';\n      }\n\n    } else {\n\n      var pageWidth = this.width()/2,\n        pageHeight = this.height();\n\n      if (data.pageObjs[page].hasClass('own-size')) {\n        prop.width = data.pageObjs[page].width();\n        prop.height = data.pageObjs[page].height();\n      } else {\n        prop.width = pageWidth;\n        prop.height = pageHeight;\n      }\n      \n      if (position) {\n        var odd = page%2;\n        prop.top = (pageHeight-prop.height)/2;\n\n        if (data.direction=='ltr') {\n          \n          prop[(odd) ? 'right' : 'left'] = pageWidth-prop.width;\n          prop[(odd) ? 'left' : 'right'] = 'auto';\n\n        } else {\n          \n          prop[(odd) ? 'left' : 'right'] = pageWidth-prop.width;\n          prop[(odd) ? 'right' : 'left'] = 'auto';\n\n        }\n      \n      }\n    }\n\n    return prop;\n\n  },\n\n  // Prepares the flip effect for a page\n\n  _makeFlip: function(page) {\n\n    var data = this.data();\n\n    if (!data.pages[page] && data.pagePlace[page]==page) {\n      \n      var single = data.display=='single',\n        odd = page%2;\n\n      data.pages[page] = data.pageObjs[page].\n        css(turnMethods._pageSize.call(this, page)).\n        flip({\n          page: page,\n          next: (odd || single) ? page+1 : page-1,\n          turn: this\n        }).\n        flip('disable', data.disabled);\n\n        // Issue about z-index\n        turnMethods._setPageLoc.call(this, page);\n\n        data.pageZoom[page] = data.zoom;\n        \n    }\n\n    return data.pages[page];\n  },\n\n  // Makes pages within a range\n\n  _makeRange: function() {\n\n    var page, range,\n      data = this.data();\n\n    if (data.totalPages<1)\n      return;\n\n    range = this.turn('range');\n\n    for (page = range[0]; page<=range[1]; page++)\n      turnMethods._addPage.call(this, page);\n\n  },\n\n  // Returns a range of pages that should be in the DOM\n  // Example:\n  // - page in the current view, return true\n  // * page is in the range, return true\n  // Otherwise, return false\n  //\n  // 1 2-3 4-5 6-7 8-9 10-11 12-13\n  //   **  **  --   **  **\n\n  range: function(page) {\n\n    var remainingPages, left, right, view,\n      data = this.data();\n\n      page = page || data.tpage || data.page || 1;\n      view = turnMethods._view.call(this, page);\n\n      if (page<1 || page>data.totalPages)\n        throw turnError('\"'+page+'\" is not a valid page');\n\n    \n      view[1] = view[1] || view[0];\n      \n      if (view[0]>=1 && view[1]<=data.totalPages) {\n\n        remainingPages = Math.floor((pagesInDOM-2)/2);\n\n        if (data.totalPages-view[1] > view[0]) {\n          left = Math.min(view[0]-1, remainingPages);\n          right = 2*remainingPages-left;\n        } else {\n          right = Math.min(data.totalPages-view[1], remainingPages);\n          left = 2*remainingPages-right;\n        }\n\n      } else {\n        left = pagesInDOM-1;\n        right = pagesInDOM-1;\n      }\n\n      return [Math.max(1, view[0]-left),\n          Math.min(data.totalPages, view[1]+right)];\n\n  },\n\n  // Detects if a page is within the range of `pagesInDOM` from the current view\n\n  _necessPage: function(page) {\n    \n    if (page===0)\n      return true;\n\n    var range = this.turn('range');\n\n    return this.data().pageObjs[page].hasClass('fixed') ||\n      (page>=range[0] && page<=range[1]);\n    \n  },\n\n  // Releases memory by removing pages from the DOM\n\n  _removeFromDOM: function() {\n\n    var page, data = this.data();\n\n    for (page in data.pageWrap)\n      if (has(page, data.pageWrap) &&\n        !turnMethods._necessPage.call(this, page))\n      turnMethods._removePageFromDOM.call(this, page);\n    \n  },\n\n  // Removes a page from DOM and its internal references\n\n  _removePageFromDOM: function(page) {\n\n    var data = this.data();\n\n    if (data.pages[page]) {\n      var dd = data.pages[page].data();\n\n      flipMethods._moveFoldingPage.call(data.pages[page], false);\n\n      if (dd.f && dd.f.fwrapper)\n        dd.f.fwrapper.remove();\n\n      data.pages[page].removeData();\n      data.pages[page].remove();\n      delete data.pages[page];\n    }\n\n    if (data.pageObjs[page])\n      data.pageObjs[page].remove();\n\n    if (data.pageWrap[page]) {\n      data.pageWrap[page].remove();\n      delete data.pageWrap[page];\n    }\n\n    turnMethods._removeMv.call(this, page);\n\n    delete data.pagePlace[page];\n    delete data.pageZoom[page];\n\n  },\n\n  // Removes a page\n\n  removePage: function(page) {\n\n    var data = this.data();\n\n    // Delete all the pages\n    if (page=='*') {\n      \n      while (data.totalPages!==0) {\n        this.turn('removePage', data.totalPages);\n      }\n\n    } else {\n\n      if (page<1 || page>data.totalPages)\n        throw turnError('The page '+ page + ' doesn\\'t exist');\n        \n      if (data.pageObjs[page]) {\n\n        // Stop animations\n        this.turn('stop');\n\n        // Remove `page`\n        turnMethods._removePageFromDOM.call(this, page);\n\n        delete data.pageObjs[page];\n\n      }\n\n      // Move the pages\n      turnMethods._movePages.call(this, page, -1);\n\n      // Resize the size of this flipbook\n      data.totalPages = data.totalPages-1;\n\n      // Check the current view\n\n      if (data.page>data.totalPages) {\n\n       data.page = null;\n       turnMethods._fitPage.call(this, data.totalPages);\n\n      } else {\n\n        turnMethods._makeRange.call(this);\n        this.turn('update');\n\n      }\n    }\n\n    return this;\n  \n  },\n\n  // Moves pages\n\n  _movePages: function(from, change) {\n\n    var page,\n      that = this,\n      data = this.data(),\n      single = data.display=='single',\n      move = function(page) {\n\n        var next = page + change,\n          odd = next%2,\n          className = (odd) ? ' odd ' : ' even ';\n\n        if (data.pageObjs[page])\n          data.pageObjs[next] = data.pageObjs[page].\n            removeClass('p' + page + ' odd even').\n            addClass('p' + next + className);\n\n        if (data.pagePlace[page] && data.pageWrap[page]) {\n\n          data.pagePlace[next] = next;\n        \n          if (data.pageObjs[next].hasClass('fixed'))\n            data.pageWrap[next] = data.pageWrap[page].\n              attr('page', next);\n          else\n            data.pageWrap[next] = data.pageWrap[page].\n              css(turnMethods._pageSize.call(that, next, true)).\n              attr('page', next);\n      \n            if (data.pages[page])\n              data.pages[next] = data.pages[page].\n                flip('options', {\n                  page: next,\n                  next: (single || odd) ? next+1 : next-1\n                });\n\n            if (change) {\n              delete data.pages[page];\n              delete data.pagePlace[page];\n              delete data.pageZoom[page];\n              delete data.pageObjs[page];\n              delete data.pageWrap[page];\n            }\n\n        }\n\n    };\n\n    if (change>0)\n      for (page=data.totalPages; page>=from; page--)\n        move(page);\n    else\n      for (page=from; page<=data.totalPages; page++)\n        move(page);\n\n  },\n\n  // Sets or Gets the display mode\n\n  display: function(display) {\n\n    var data = this.data(),\n      currentDisplay = data.display;\n\n    if (display===undefined) {\n      \n      return currentDisplay;\n\n    } else {\n\n      if ($.inArray(display, displays)==-1)\n        throw turnError('\"'+display + '\" is not a value for display');\n      \n      switch(display) {\n        case 'single':\n\n          // Create a temporal page to use as folded page\n\n          if (!data.pageObjs[0]) {\n            this.turn('stop').\n              css({'overflow': 'hidden'});\n\n            data.pageObjs[0] = $('<div />',\n                {'class': 'page p-temporal'}).\n              css({width: this.width(), height: this.height()}).\n              appendTo(this);\n          }\n\n          this.addClass('shadow');\n\n        break;\n        case 'double':\n\n          // Remove the temporal page\n\n          if (data.pageObjs[0]) {\n            this.turn('stop').css({'overflow': ''});\n            data.pageObjs[0].remove();\n            delete data.pageObjs[0];\n          }\n\n          this.removeClass('shadow');\n\n        break;\n      }\n      \n\n      data.display = display;\n\n      if (currentDisplay) {\n        var size = this.turn('size');\n        turnMethods._movePages.call(this, 1, 0);\n        this.turn('size', size.width, size.height).\n          turn('update');\n      }\n\n      return this;\n\n    }\n  \n  },\n  \n  // Gets and sets the direction of the flipbook\n\n  direction: function(dir) {\n\n    var data = this.data();\n\n    if (dir===undefined) {\n\n      return data.direction;\n\n    } else {\n\n      dir = dir.toLowerCase();\n\n      if ($.inArray(dir, directions)==-1)\n        throw turnError('\"' + dir + '\" is not a value for direction');\n\n      if (dir=='rtl') {\n        $(this).attr('dir', 'ltr').\n          css({direction: 'ltr'});\n      }\n\n      data.direction = dir;\n\n      if (data.done)\n        this.turn('size', $(this).width(), $(this).height());\n\n      return this;\n    }\n\n  },\n\n  // Detects animation\n\n  animating: function() {\n\n    return this.data().pageMv.length>0;\n\n  },\n\n  // Gets the current activated corner\n\n  corner: function() {\n    \n    var corner,\n      page,\n      data = this.data();\n\n    for (page in data.pages) {\n      if (has(page, data.pages))\n        if ((corner = data.pages[page].flip('corner'))) {\n          return corner;\n        }\n    }\n\n    return false;\n  },\n\n  // Gets the data stored in the flipbook\n\n  data: function() {\n    \n    return this.data();\n\n  },\n\n  // Disables and enables the effect\n\n  disable: function(disable) {\n\n    var page,\n      data = this.data(),\n      view = this.turn('view');\n\n    data.disabled = disable===undefined || disable===true;\n\n    for (page in data.pages) {\n      if (has(page, data.pages))\n        data.pages[page].flip('disable',\n          (data.disabled) ? true : $.inArray(parseInt(page, 10), view)==-1);\n    }\n\n    return this;\n\n  },\n\n  // Disables and enables the effect\n\n  disabled: function(disable) {\n\n    if (disable===undefined) {\n      return this.data().disabled===true;\n    } else {\n      return this.turn('disable', disable);\n    }\n\n  },\n\n  // Gets and sets the size\n\n  size: function(width, height) {\n\n    if (width===undefined || height===undefined) {\n      \n      return {width: this.width(), height: this.height()};\n\n    } else {\n\n      this.turn('stop');\n\n      var page, prop,\n        data = this.data(),\n        pageWidth = (data.display=='double') ? width/2 : width;\n\n      this.css({width: width, height: height});\n\n      if (data.pageObjs[0])\n        data.pageObjs[0].css({width: pageWidth, height: height});\n      \n      for (page in data.pageWrap) {\n        if (!has(page, data.pageWrap)) continue;\n\n        prop = turnMethods._pageSize.call(this, page, true);\n\n        data.pageObjs[page].css({width: prop.width, height: prop.height});\n        data.pageWrap[page].css(prop);\n        \n        if (data.pages[page])\n          data.pages[page].css({width: prop.width, height: prop.height});\n      }\n\n      this.turn('resize');\n\n      return this;\n\n    }\n  },\n\n  // Resizes each page\n\n  resize: function() {\n\n    var page, data = this.data();\n\n    if (data.pages[0]) {\n      data.pageWrap[0].css({left: -this.width()});\n      data.pages[0].flip('resize', true);\n    }\n\n    for (page = 1; page <= data.totalPages; page++)\n      if (data.pages[page])\n        data.pages[page].flip('resize', true);\n\n    turnMethods._updateShadow.call(this);\n\n    if (data.opts.autoCenter)\n      this.turn('center');\n\n  },\n\n  // Removes an animation from the cache\n\n  _removeMv: function(page) {\n\n    var i, data = this.data();\n      \n    for (i=0; i<data.pageMv.length; i++)\n      if (data.pageMv[i]==page) {\n        data.pageMv.splice(i, 1);\n        return true;\n      }\n\n    return false;\n\n  },\n\n  // Adds an animation to the cache\n  \n  _addMv: function(page) {\n\n    var data = this.data();\n\n    turnMethods._removeMv.call(this, page);\n    data.pageMv.push(page);\n\n  },\n\n  // Gets indexes for a view\n\n  _view: function(page) {\n  \n    var data = this.data();\n    \n    page = page || data.page;\n\n    if (data.display=='double')\n      return (page%2) ? [page-1, page] : [page, page+1];\n    else\n      return [page];\n\n  },\n\n  // Gets a view\n\n  view: function(page) {\n\n    var data = this.data(),\n      view = turnMethods._view.call(this, page);\n\n    if (data.display=='double')\n      return [(view[0]>0) ? view[0] : 0,\n        (view[1]<=data.totalPages) ? view[1] : 0];\n    else\n      return [(view[0]>0 && view[0]<=data.totalPages) ? view[0] : 0];\n\n  },\n\n  // Stops animations\n\n  stop: function(ignore, animate) {\n\n    if (this.turn('animating')) {\n  \n      var i, opts, page,\n        data = this.data();\n\n      if (data.tpage) {\n        data.page = data.tpage;\n        delete data['tpage'];\n      }\n\n      for (i = 0; i<data.pageMv.length; i++) {\n\n        if (!data.pageMv[i] || data.pageMv[i]===ignore)\n          continue;\n\n        page = data.pages[data.pageMv[i]];\n        opts = page.data().f.opts;\n\n        page.flip('hideFoldedPage', animate);\n\n        if (!animate)\n          flipMethods._moveFoldingPage.call(page, false);\n\n        if (opts.force) {\n          opts.next = (opts.page%2===0) ? opts.page-1 : opts.page+1;\n          delete opts['force'];\n        }\n\n      }\n    }\n    \n    this.turn('update');\n\n    return this;\n  },\n\n  // Gets and sets the number of pages\n\n  pages: function(pages) {\n\n    var data = this.data();\n\n    if (pages) {\n\n      if (pages<data.totalPages) {\n\n        for (var page = data.totalPages; page>pages; page--)\n          this.turn('removePage', page);\n\n      }\n\n        data.totalPages = pages;\n        turnMethods._fitPage.call(this, data.page);\n\n      return this;\n\n    } else\n      return data.totalPages;\n\n  },\n\n  // Checks missing pages\n\n  _missing : function(page) {\n    \n    var data = this.data();\n\n    if (data.totalPages<1)\n      return;\n\n    var p,\n        range = this.turn('range', page),\n        missing = [];\n\n    for (p = range[0]; p<=range[1]; p++) {\n      if (!data.pageObjs[p])\n        missing.push(p);\n    }\n\n    if (missing.length>0)\n      this.trigger('missing', [missing]);\n\n  },\n\n  // Sets a page without effect\n\n  _fitPage: function(page) {\n\n    var data = this.data(),\n      newView = this.turn('view', page);\n\n    turnMethods._missing.call(this, page);\n    \n    if (!data.pageObjs[page])\n      return;\n\n    data.page = page;\n  \n    this.turn('stop');\n\n    for (var i = 0; i<newView.length; i++) {\n\n      if (newView[i] && data.pageZoom[newView[i]]!=data.zoom) {\n  \n        this.trigger('zoomed',[\n          newView[i],\n          newView,\n          data.pageZoom[newView[i]],\n          data.zoom]);\n\n        data.pageZoom[newView[i]] = data.zoom;\n\n      }\n    }\n\n    turnMethods._removeFromDOM.call(this);\n    turnMethods._makeRange.call(this);\n    turnMethods._updateShadow.call(this);\n    this.trigger('turned', [page, newView]);\n    this.turn('update');\n\n    if (data.opts.autoCenter)\n      this.turn('center');\n\n  },\n  \n  // Turns the page\n\n  _turnPage: function(page) {\n\n    var current,\n      next,\n      data = this.data(),\n      place = data.pagePlace[page],\n      view = this.turn('view'),\n      newView = this.turn('view', page);\n\n\n    if (data.page!=page) {\n\n      var currentPage = data.page;\n\n      if (trigger('turning', this, [page, newView])=='prevented') {\n\n        if (currentPage==data.page && $.inArray(place, data.pageMv)!=-1)\n          data.pages[place].flip('hideFoldedPage', true);\n        \n        return;\n\n      }\n\n      if ($.inArray(1, newView)!=-1)\n        this.trigger('first');\n      if ($.inArray(data.totalPages, newView)!=-1)\n        this.trigger('last');\n\n    }\n\n    if (data.display=='single') {\n      current = view[0];\n      next = newView[0];\n    } else if (view[1] && page>view[1]) {\n      current = view[1];\n      next = newView[0];\n    } else if (view[0] && page<view[0]) {\n      current = view[0];\n      next = newView[1];\n    }\n\n    var optsCorners = data.opts.turnCorners.split(','),\n      flipData = data.pages[current].data().f,\n      opts = flipData.opts,\n      actualPoint = flipData.point;\n\n    turnMethods._missing.call(this, page);\n    \n    if (!data.pageObjs[page])\n      return;\n\n    this.turn('stop');\n\n    data.page = page;\n\n    turnMethods._makeRange.call(this);\n\n    data.tpage = next;\n\n    if (opts.next!=next) {\n      opts.next = next;\n      opts.force = true;\n    }\n\n    this.turn('update');\n\n    flipData.point = actualPoint;\n    \n    if (flipData.effect=='hard')\n      if (data.direction=='ltr')\n        data.pages[current].flip('turnPage',\n          (page>current) ? 'r' : 'l');\n      else\n        data.pages[current].flip('turnPage',\n          (page>current) ? 'l' : 'r');\n    else {\n      if (data.direction=='ltr')\n        data.pages[current].flip('turnPage',\n          optsCorners[(page>current) ? 1 : 0]);\n      else\n        data.pages[current].flip('turnPage',\n          optsCorners[(page>current) ? 0 : 1]);\n    }\n\n  },\n\n  // Gets and sets a page\n\n  page: function(page) {\n\n    var data = this.data();\n\n    if (page===undefined) {\n      \n      return data.page;\n\n    } else {\n\n      if (!data.disabled && !data.destroying) {\n\n        page = parseInt(page, 10);\n\n        if (page>0 && page<=data.totalPages) {\n\n          if (page!=data.page) {\n            if (!data.done || $.inArray(page, this.turn('view'))!=-1)\n              turnMethods._fitPage.call(this, page);\n            else\n              turnMethods._turnPage.call(this, page);\n          }\n      \n          return this;\n\n        } else {\n        \n          throw turnError('The page ' + page + ' does not exist');\n\n        }\n\n      }\n\n    }\n\n  },\n\n  // Turns to the next view\n\n  next: function() {\n\n    return this.turn('page', Math.min(this.data().totalPages,\n      turnMethods._view.call(this, this.data().page).pop() + 1));\n  \n  },\n\n  // Turns to the previous view\n\n  previous: function() {\n\n    return this.turn('page', Math.max(1,\n      turnMethods._view.call(this, this.data().page).shift() - 1));\n\n  },\n\n  // Shows a peeling corner\n\n  peel: function(corner, animate) {\n    \n    var data = this.data(),\n      view = this.turn('view');\n\n    animate = (animate===undefined) ? true : animate===true;\n\n    if (corner===false) {\n      \n      this.turn('stop', null, animate);\n\n    } else {\n    \n      if (data.display=='single') {\n\n        data.pages[data.page].flip('peel', corner, animate);\n\n      } else {\n\n        var page;\n\n        if (data.direction=='ltr') {\n          \n          page = (corner.indexOf('l')!=-1) ? view[0] : view[1];\n\n        } else {\n          \n          page = (corner.indexOf('l')!=-1) ? view[1] : view[0];\n\n        }\n        \n        if (data.pages[page])\n          data.pages[page].flip('peel', corner, animate);\n\n      }\n    }\n\n    return this;\n\n  },\n\n  // Adds a motion to the internal list\n  // This event is called in context of flip\n\n  _addMotionPage: function() {\n\n    var opts = $(this).data().f.opts,\n      turn = opts.turn,\n      dd = turn.data();\n\n    turnMethods._addMv.call(turn, opts.page);\n\n  },\n\n  // This event is called in context of flip\n\n  _eventStart: function(e, opts, corner) {\n\n    var data = opts.turn.data(),\n      actualZoom = data.pageZoom[opts.page];\n\n    if (e.isDefaultPrevented()) {\n      turnMethods._updateShadow.call(opts.turn);\n      return;\n    }\n\n    if (actualZoom && actualZoom!=data.zoom) {\n      \n      opts.turn.trigger('zoomed',[\n        opts.page,\n        opts.turn.turn('view', opts.page),\n        actualZoom,\n        data.zoom]);\n\n      data.pageZoom[opts.page] = data.zoom;\n\n    }\n\n    if (data.display=='single' && corner) {\n\n      if ((corner.charAt(1)=='l' && data.direction=='ltr') ||\n        (corner.charAt(1)=='r' && data.direction=='rtl'))\n      {\n        \n        opts.next = (opts.next<opts.page) ? opts.next : opts.page-1;\n        opts.force = true;\n\n      } else {\n        \n        opts.next = (opts.next>opts.page) ? opts.next : opts.page+1;\n\n      }\n\n    }\n\n    turnMethods._addMotionPage.call(e.target);\n    turnMethods._updateShadow.call(opts.turn);\n  },\n\n  // This event is called in context of flip\n\n  _eventEnd: function(e, opts, turned) {\n  \n    var that = $(e.target),\n      data = that.data().f,\n      turn = opts.turn,\n      dd = turn.data();\n\n    if (turned) {\n\n      var tpage = dd.tpage || dd.page;\n    \n      if (tpage==opts.next || tpage==opts.page) {\n        delete dd.tpage;\n\n        turnMethods._fitPage.call(turn, tpage || opts.next, true);\n      }\n\n    } else {\n      \n      turnMethods._removeMv.call(turn, opts.page);\n      turnMethods._updateShadow.call(turn);\n      turn.turn('update');\n\n    }\n    \n  },\n  \n  // This event is called in context of flip\n\n  _eventPressed: function(e) {\n\n    var page,\n      data = $(e.target).data().f,\n      turn = data.opts.turn,\n      turnData = turn.data(),\n      pages = turnData.pages;\n    \n    turnData.mouseAction = true;\n\n    turn.turn('update');\n\n    return data.time = new Date().getTime();\n\n  },\n\n  // This event is called in context of flip\n\n  _eventReleased: function(e, point) {\n\n    var outArea,\n      page = $(e.target),\n      data = page.data().f,\n      turn = data.opts.turn,\n      turnData = turn.data();\n    \n    if (turnData.display=='single') {\n      outArea = (point.corner=='br' || point.corner=='tr') ?\n        point.x<page.width()/2:\n        point.x>page.width()/2;\n    } else {\n      outArea = point.x<0 || point.x>page.width();\n    }\n\n    if ((new Date()).getTime()-data.time<200 || outArea) {\n\n      e.preventDefault();\n      turnMethods._turnPage.call(turn, data.opts.next);\n\n    }\n\n    turnData.mouseAction = false;\n\n  },\n\n  // This event is called in context of flip\n  \n  _flip: function(e) {\n\n    e.stopPropagation();\n\n    var opts = $(e.target).data().f.opts;\n\n    opts.turn.trigger('turn', [opts.next]);\n\n    if (opts.turn.data().opts.autoCenter) {\n      opts.turn.turn('center', opts.next);\n    }\n\n  },\n\n //\n  _touchStart: function() {\n    var data = this.data();\n    for (var page in data.pages) {\n      if (has(page, data.pages) &&\n        flipMethods._eventStart.apply(data.pages[page], arguments)===false) {\n          return false;\n      }\n    }\n  },\n  \n  //\n  _touchMove: function() {\n    var data = this.data();\n    for (var page in data.pages) {\n      if (has(page, data.pages)) {\n        flipMethods._eventMove.apply(data.pages[page], arguments);\n      }\n    }\n  },\n\n  //\n  _touchEnd: function() {\n    var data = this.data();\n    for (var page in data.pages) {\n      if (has(page, data.pages)) {\n        flipMethods._eventEnd.apply(data.pages[page], arguments);\n      }\n    }\n  },\n\n  // Calculate the z-index value for pages during the animation\n\n  calculateZ: function(mv) {\n\n    var i, page, nextPage, placePage, dpage,\n      that = this,\n      data = this.data(),\n      view = this.turn('view'),\n      currentPage = view[0] || view[1],\n      total = mv.length-1,\n      r = {pageZ: {}, partZ: {}, pageV: {}},\n\n      addView = function(page) {\n        var view = that.turn('view', page);\n        if (view[0]) r.pageV[view[0]] = true;\n        if (view[1]) r.pageV[view[1]] = true;\n      };\n    \n    for (i = 0; i<=total; i++) {\n      page = mv[i];\n      nextPage = data.pages[page].data().f.opts.next;\n      placePage = data.pagePlace[page];\n      addView(page);\n      addView(nextPage);\n      dpage = (data.pagePlace[nextPage]==nextPage) ? nextPage : page;\n      r.pageZ[dpage] = data.totalPages - Math.abs(currentPage-dpage);\n      r.partZ[placePage] = data.totalPages*2 -  total + i;\n    }\n\n    return r;\n  },\n\n  // Updates the z-index and display property of every page\n\n  update: function() {\n\n    var page,\n      data = this.data();\n\n    if (this.turn('animating') && data.pageMv[0]!==0) {\n\n      // Update motion\n\n      var p, apage, fixed,\n        pos = this.turn('calculateZ', data.pageMv),\n        corner = this.turn('corner'),\n        actualView = this.turn('view'),\n        newView = this.turn('view', data.tpage);\n  \n      for (page in data.pageWrap) {\n\n        if (!has(page, data.pageWrap))\n          continue;\n\n        fixed = data.pageObjs[page].hasClass('fixed');\n\n        data.pageWrap[page].css({\n          display: (pos.pageV[page] || fixed) ? '' : 'none',\n          zIndex:\n            (data.pageObjs[page].hasClass('hard') ?\n              pos.partZ[page]\n              :\n              pos.pageZ[page]\n            ) || (fixed ? -1 : 0)\n        });\n\n        if ((p = data.pages[page])) {\n\n          p.flip('z', pos.partZ[page] || null);\n\n          if (pos.pageV[page])\n            p.flip('resize');\n          \n          if (data.tpage) { // Is it turning the page to `tpage`?\n\n            p.flip('hover', false).\n              flip('disable',\n                $.inArray(parseInt(page, 10), data.pageMv)==-1 &&\n                page!=newView[0] &&\n                page!=newView[1]);\n\n          } else {\n\n            p.flip('hover', corner===false).\n              flip('disable', page!=actualView[0] && page!=actualView[1]);\n\n          }\n\n        }\n\n      }\n\n    } else {\n\n      // Update static pages\n\n      for (page in data.pageWrap) {\n\n        if (!has(page, data.pageWrap))\n          continue;\n\n        var pageLocation = turnMethods._setPageLoc.call(this, page);\n\n        if (data.pages[page]) {\n          data.pages[page].\n            flip('disable', data.disabled || pageLocation!=1).\n            flip('hover', true).\n            flip('z', null);\n        }\n      }\n    }\n\n    return this;\n  },\n\n  // Updates the position and size of the flipbook's shadow\n\n  _updateShadow: function() {\n    \n    var view, view2, shadow,\n      data = this.data(),\n      width = this.width(),\n      height = this.height(),\n      pageWidth = (data.display=='single') ? width : width/2;\n\n    view = this.turn('view');\n\n    if (!data.shadow) {\n      data.shadow = $('<div />', {\n          'class': 'shadow',\n          'css': divAtt(0, 0, 0).css\n        }).\n        appendTo(this);\n    }\n\n    for (var i = 0; i<data.pageMv.length; i++) {\n      if (!view[0] || !view[1])\n        break;\n    \n      view = this.turn('view', data.pages[data.pageMv[i]].data().f.opts.next);\n      view2 = this.turn('view', data.pageMv[i]);\n\n      view[0] = view[0] && view2[0];\n      view[1] = view[1] && view2[1];\n    }\n\n    if (!view[0]) shadow = (data.direction=='ltr') ? 1 : 2;\n    else if (!view[1]) shadow = (data.direction=='ltr') ? 2 : 1;\n    else shadow = 3;\n\n    switch (shadow) {\n      case 1:\n        data.shadow.css({\n          width: pageWidth,\n          height: height,\n          top: 0,\n          left: pageWidth\n        });\n        break;\n      case 2:\n        data.shadow.css({\n          width: pageWidth,\n          height: height,\n          top: 0,\n          left: 0\n        });\n        break;\n      case 3:\n        data.shadow.css({\n          width: width,\n          height: height,\n          top: 0,\n          left: 0\n        });\n        break;\n    }\n\n  },\n\n  // Sets the z-index and display property of a page\n  // It depends on the current view\n\n  _setPageLoc: function(page) {\n\n    var data = this.data(),\n      view = this.turn('view'),\n      loc = 0;\n\n    \n    if (page==view[0] || page==view[1])\n      loc = 1;\n    else if (\n      (data.display=='single' && page==view[0]+1) ||\n      (data.display=='double' && page==view[0]-2 || page==view[1]+2)\n    )\n      loc = 2;\n\n    if (!this.turn('animating'))\n      switch (loc) {\n        case 1:\n          data.pageWrap[page].css(\n          {\n            zIndex: data.totalPages,\n            display: ''\n          });\n        break;\n        case 2:\n          data.pageWrap[page].css(\n          {\n            zIndex: data.totalPages-1,\n            display: ''\n          });\n        break;\n        case 0:\n          data.pageWrap[page].css(\n          {\n            zIndex: 0,\n            display: (data.pageObjs[page].hasClass('fixed')) ? '' : 'none'}\n          );\n        break;\n      }\n    \n    return loc;\n  },\n\n  // Gets and sets the options\n\n  options: function(options) {\n    \n    if (options===undefined) {\n      \n      return this.data().opts;\n\n    } else {\n\n      var data = this.data();\n\n      // Set new values\n\n      $.extend(data.opts, options);\n      \n      // Set pages\n\n      if (options.pages)\n        this.turn('pages', options.pages);\n\n      // Set page\n\n      if (options.page)\n        this.turn('page', options.page);\n\n      // Set display\n\n      if (options.display)\n        this.turn('display', options.display);\n      \n      // Set direction\n\n      if (options.direction)\n        this.turn('direction', options.direction);\n\n      // Set size\n\n      if (options.width && options.height)\n        this.turn('size', options.width, options.height);\n      \n      // Add event listeners\n\n      if (options.when)\n        for (var eventName in options.when)\n          if (has(eventName, options.when)) {\n            this.unbind(eventName).\n              bind(eventName, options.when[eventName]);\n          }\n\n      return this;\n    }\n\n  },\n\n  // Gets the current version\n\n  version: function() {\n\n    return version;\n\n  }\n},\n\n// Methods and properties for the flip page effect\n\nflipMethods = {\n\n  // Constructor\n\n  init: function(opts) {\n\n    this.data({f: {\n      disabled: false,\n      hover: false,\n      effect: (this.hasClass('hard')) ? 'hard' : 'sheet'\n    }});\n  \n    this.flip('options', opts);\n\n    flipMethods._addPageWrapper.call(this);\n\n    return this;\n  },\n\n  setData: function(d) {\n    \n    var data = this.data();\n\n    data.f = $.extend(data.f, d);\n\n    return this;\n  },\n\n  options: function(opts) {\n    \n    var data = this.data().f;\n\n    if (opts) {\n      flipMethods.setData.call(this,\n        {opts: $.extend({}, data.opts || flipOptions, opts)});\n      return this;\n    } else\n      return data.opts;\n\n  },\n\n  z: function(z) {\n    \n    var data = this.data().f;\n\n    data.opts['z-index'] = z;\n\n    if (data.fwrapper)\n      data.fwrapper.css({\n        zIndex: z || parseInt(data.parent.css('z-index'), 10) || 0\n      });\n\n    return this;\n  },\n\n  _cAllowed: function() {\n    \n    var data = this.data().f,\n      page = data.opts.page,\n      turnData = data.opts.turn.data(),\n      odd = page%2;\n    \n    if (data.effect=='hard') {\n    \n      return (turnData.direction=='ltr') ?\n        [(odd) ? 'r' : 'l'] :\n        [(odd) ? 'l' : 'r'];\n\n    } else {\n\n      if (turnData.display=='single') {\n\n        if (page==1)\n          return (turnData.direction=='ltr') ?\n            corners['forward'] : corners['backward'];\n        else if (page==turnData.totalPages)\n          return (turnData.direction=='ltr') ?\n            corners['backward'] : corners['forward'];\n        else\n          return corners['all'];\n\n      } else {\n\n        return (turnData.direction=='ltr') ?\n          corners[(odd) ? 'forward' : 'backward']\n          :\n          corners[(odd) ? 'backward' : 'forward'];\n\n      }\n\n    }\n\n  },\n\n  _cornerActivated: function(p) {\n\n    var data = this.data().f,\n      width = this.width(),\n      height = this.height(),\n      point = {x: p.x, y: p.y, corner: ''},\n      csz = data.opts.cornerSize;\n\n    if (point.x<=0 || point.y<=0 || point.x>=width || point.y>=height)\n      return false;\n\n    var allowedCorners = flipMethods._cAllowed.call(this);\n\n    switch (data.effect) {\n      case 'hard':\n        \n        if (point.x>width-csz)\n          point.corner = 'r';\n        else if (point.x<csz)\n          point.corner = 'l';\n        else\n          return false;\n            \n        break;\n\n      case 'sheet':\n        \n        if (point.y<csz)\n          point.corner+= 't';\n        else if (point.y>=height-csz)\n          point.corner+= 'b';\n        else\n          return false;\n    \n        if (point.x<=csz)\n          point.corner+= 'l';\n        else if (point.x>=width-csz)\n          point.corner+= 'r';\n        else\n          return false;\n     \n        break;\n      }\n\n    return (!point.corner || $.inArray(point.corner, allowedCorners)==-1) ?\n      false : point;\n\n  },\n\n  _isIArea: function(e) {\n\n    var pos = this.data().f.parent.offset();\n\n    e = (isTouch && e.originalEvent) ? e.originalEvent.touches[0] : e;\n\n    return flipMethods._cornerActivated.call(this,\n      {\n        x: e.pageX-pos.left,\n        y: e.pageY-pos.top\n      });\n\n  },\n\n  _c: function(corner, opts) {\n\n    opts = opts || 0;\n\n    switch (corner) {\n      case 'tl':\n        return point2D(opts, opts);\n      case 'tr':\n        return point2D(this.width()-opts, opts);\n      case 'bl':\n        return point2D(opts, this.height()-opts);\n      case 'br':\n        return point2D(this.width()-opts, this.height()-opts);\n      case 'l':\n        return point2D(opts, 0);\n      case 'r':\n        return point2D(this.width()-opts, 0);\n    }\n\n  },\n\n  _c2: function(corner) {\n\n    switch (corner) {\n      case 'tl':\n        return point2D(this.width()*2, 0);\n      case 'tr':\n        return point2D(-this.width(), 0);\n      case 'bl':\n        return point2D(this.width()*2, this.height());\n      case 'br':\n        return point2D(-this.width(), this.height());\n      case 'l':\n        return point2D(this.width()*2, 0);\n      case 'r':\n        return point2D(-this.width(), 0);\n    }\n\n  },\n\n  _foldingPage: function() {\n\n    var data = this.data().f;\n\n    if (!data)\n      return;\n\n    var opts = data.opts;\n\n    if (opts.turn) {\n      data = opts.turn.data();\n      if (data.display == 'single')\n        return (opts.next>1 || opts.page>1) ? data.pageObjs[0] : null;\n      else\n        return data.pageObjs[opts.next];\n    }\n\n  },\n\n  _backGradient: function() {\n\n    var data = this.data().f,\n      turnData = data.opts.turn.data(),\n      gradient =  turnData.opts.gradients && (turnData.display=='single' ||\n         (data.opts.page!=2 && data.opts.page!=turnData.totalPages-1));\n\n    if (gradient && !data.bshadow)\n      data.bshadow = $('<div/>', divAtt(0, 0, 1)).\n        css({'position': '', width: this.width(), height: this.height()}).\n        appendTo(data.parent);\n\n    return gradient;\n\n  },\n\n  type: function () {\n    \n    return this.data().f.effect;\n\n  },\n\n  resize: function(full) {\n    \n    var data = this.data().f,\n      turnData = data.opts.turn.data(),\n      width = this.width(),\n      height = this.height();\n\n    switch (data.effect) {\n      case 'hard':\n        \n      if (full) {\n        data.wrapper.css({width: width, height: height});\n        data.fpage.css({width: width, height: height});\n        if (turnData.opts.gradients) {\n          data.ashadow.css({width: width, height: height});\n          data.bshadow.css({width: width, height: height});\n        }\n      }\n\n      break;\n      case 'sheet':\n\n      if (full) {\n        var size = Math.round(Math.sqrt(Math.pow(width, 2)+Math.pow(height, 2)));\n\n        data.wrapper.css({width: size, height: size});\n        data.fwrapper.css({width: size, height: size}).\n          children(':first-child').\n          css({width: width, height: height});\n\n        data.fpage.css({width: width, height: height});\n\n        if (turnData.opts.gradients)\n          data.ashadow.css({width: width, height: height});\n\n        if (flipMethods._backGradient.call(this))\n          data.bshadow.css({width: width, height: height});\n      }\n\n      if (data.parent.is(':visible')) {\n        var offset = findPos(data.parent[0]);\n\n        data.fwrapper.css({top: offset.top,\n          left: offset.left});\n\n        //if (data.opts.turn) {\n         offset = findPos(data.opts.turn[0]);\n         data.fparent.css({top: -offset.top, left: -offset.left});\n        //}\n      }\n\n      this.flip('z', data.opts['z-index']);\n\n      break;\n    }\n\n  },\n\n  // Prepares the page by adding a general wrapper and another objects\n\n  _addPageWrapper: function() {\n\n    var att,\n      data = this.data().f,\n      turnData = data.opts.turn.data(),\n      parent = this.parent();\n\n    data.parent = parent;\n\n  if (!data.wrapper)\n    switch (data.effect) {\n      case 'hard':\n        \n        var cssProperties = {};\n        cssProperties[vendor + 'transform-style'] = 'preserve-3d';\n        cssProperties[vendor + 'backface-visibility'] = 'hidden';\n\n        data.wrapper = $('<div/>', divAtt(0, 0, 2)).\n          css(cssProperties).\n          appendTo(parent).\n          prepend(this);\n\n        data.fpage = $('<div/>', divAtt(0, 0, 1)).\n          css(cssProperties).\n          appendTo(parent);\n        \n        if (turnData.opts.gradients) {\n          data.ashadow = $('<div/>', divAtt(0, 0,  0)).\n            hide().\n            appendTo(parent);\n\n          data.bshadow = $('<div/>', divAtt(0, 0,  0));\n        }\n\n      break;\n      case 'sheet':\n        \n        var width = this.width(),\n          height = this.height(),\n          size = Math.round(Math.sqrt(Math.pow(width, 2)+Math.pow(height, 2)));\n        \n        data.fparent = data.opts.turn.data().fparent;\n\n        if (!data.fparent) {\n          var fparent = $('<div/>', {css: {'pointer-events': 'none'}}).hide();\n            fparent.data().flips = 0;\n            fparent.css(divAtt(0, 0, 'auto', 'visible').css).\n            appendTo(data.opts.turn);\n            \n            data.opts.turn.data().fparent = fparent;\n            data.fparent = fparent;\n        }\n\n        this.css({position: 'absolute', top: 0, left: 0, bottom: 'auto', right: 'auto'});\n\n        data.wrapper = $('<div/>', divAtt(0, 0, this.css('z-index'))).\n          appendTo(parent).\n          prepend(this);\n\n        data.fwrapper = $('<div/>', divAtt(parent.offset().top, parent.offset().left)).\n          hide().\n          appendTo(data.fparent);\n\n        data.fpage = $('<div/>', divAtt(0, 0, 0, 'visible')).\n          css({cursor: 'default'}).\n          appendTo(data.fwrapper);\n\n        if (turnData.opts.gradients)\n          data.ashadow = $('<div/>', divAtt(0, 0,  1)).\n          appendTo(data.fpage);\n\n        flipMethods.setData.call(this, data);\n\n      break;\n    }\n\n    // Set size\n    flipMethods.resize.call(this, true);\n\n  },\n\n  // Takes a 2P point from the screen and applies the transformation\n\n  _fold: function(point) {\n\n    var data = this.data().f,\n      turnData = data.opts.turn.data(),\n      o = flipMethods._c.call(this, point.corner),\n      width = this.width(),\n      height = this.height();\n\n    switch (data.effect) {\n\n      case 'hard':\n\n        if (point.corner=='l')\n          point.x = Math.min(Math.max(point.x, 0), width*2);\n        else\n          point.x = Math.max(Math.min(point.x, width), -width);\n\n        var leftPos,\n          shadow,\n          gradientX,\n          fpageOrigin,\n          parentOrigin,\n          totalPages = turnData.totalPages,\n          zIndex = data.opts['z-index'] || totalPages,\n          parentCss = {'overflow': 'visible'},\n          relX = (o.x) ? (o.x - point.x)/width : point.x/width,\n          angle = relX * 90,\n          half = angle<90;\n\n        switch (point.corner) {\n          case 'l':\n\n            fpageOrigin =  '0% 50%';\n            parentOrigin =  '100% 50%';\n\n            if (half) {\n              leftPos = 0;\n              shadow = data.opts.next-1>0;\n              gradientX = 1;\n            } else {\n              leftPos = '100%';\n              shadow = data.opts.page+1<totalPages;\n              gradientX = 0;\n            }\n\n          break;\n          case 'r':\n\n            fpageOrigin =  '100% 50%';\n            parentOrigin =  '0% 50%';\n            angle = -angle;\n            width = -width;\n\n            if (half) {\n              leftPos = 0;\n              shadow = data.opts.next+1<totalPages;\n              gradientX = 0;\n            } else {\n              leftPos = '-100%';\n              shadow = data.opts.page!=1;\n              gradientX = 1;\n            }\n\n          break;\n        }\n\n        parentCss[vendor+'perspective-origin'] = parentOrigin;\n\n        data.wrapper.transform('rotateY('+angle+'deg)' +\n          'translate3d(0px, 0px, '+(this.attr('depth')||0)+'px)', parentOrigin);\n\n        data.fpage.transform('translateX('+width+'px) rotateY('+(180+angle)+'deg)', fpageOrigin);\n\n        data.parent.css(parentCss);\n\n        if (half) {\n          relX = -relX+1;\n          data.wrapper.css({zIndex: zIndex+1});\n          data.fpage.css({zIndex: zIndex});\n        } else {\n          relX = relX-1;\n          data.wrapper.css({zIndex: zIndex});\n          data.fpage.css({zIndex: zIndex+1});\n        }\n\n        if (turnData.opts.gradients) {\n          if (shadow)\n            data.ashadow.css({\n              display: '',\n              left: leftPos,\n              backgroundColor: 'rgba(0,0,0,'+(0.5*relX)+')'\n            }).\n            transform('rotateY(0deg)');\n          else\n            data.ashadow.hide();\n\n          data.bshadow.css({opacity:-relX + 1});\n\n          if (half) {\n            if (data.bshadow.parent()[0]!=data.wrapper[0]) {\n              data.bshadow.appendTo(data.wrapper);\n            }\n          } else {\n            if (data.bshadow.parent()[0]!=data.fpage[0]) {\n              data.bshadow.appendTo(data.fpage);\n            }\n          }\n          /*data.bshadow.css({\n            backgroundColor: 'rgba(0,0,0,'+(0.1)+')'\n          })*/\n          gradient(data.bshadow, point2D(gradientX * 100, 0), point2D((-gradientX + 1)*100, 0),\n            [[0, 'rgba(0,0,0,0.3)'],[1, 'rgba(0,0,0,0)']],2);\n          \n        }\n\n        break;\n      case 'sheet':\n\n        var that = this,\n          a = 0,\n          alpha = 0,\n          beta,\n          px,\n          gradientEndPointA,\n          gradientEndPointB,\n          gradientStartVal,\n          gradientSize,\n          gradientOpacity,\n          shadowVal,\n          mv = point2D(0, 0),\n          df = point2D(0, 0),\n          tr = point2D(0, 0),\n          folding = flipMethods._foldingPage.call(this),\n          tan = Math.tan(alpha),\n          ac = turnData.opts.acceleration,\n          h = data.wrapper.height(),\n          top = point.corner.substr(0, 1) == 't',\n          left = point.corner.substr(1, 1) == 'l',\n\n      compute = function() {\n\n        var rel = point2D(0, 0);\n        var middle = point2D(0, 0);\n\n        rel.x = (o.x) ? o.x - point.x : point.x;\n\n        if (!hasRot) {\n          rel.y = 0;\n        } else {\n          rel.y = (o.y) ? o.y - point.y : point.y;\n        }\n\n        middle.x = (left)? width - rel.x/2 : point.x + rel.x/2;\n        middle.y = rel.y/2;\n        \n        var alpha =  A90-Math.atan2(rel.y, rel.x),\n          gamma = alpha - Math.atan2(middle.y, middle.x),\n          distance =  Math.max(0, Math.sin(gamma) * Math.sqrt(Math.pow(middle.x, 2) + Math.pow(middle.y, 2)));\n          \n          a = deg(alpha);\n\n          tr = point2D(distance * Math.sin(alpha), distance * Math.cos(alpha));\n\n          if (alpha > A90) {\n            tr.x = tr.x + Math.abs(tr.y * rel.y/rel.x);\n            tr.y = 0;\n            if (Math.round(tr.x*Math.tan(PI-alpha)) < height) {\n              point.y = Math.sqrt(Math.pow(height, 2)+2 * middle.x * rel.x);\n              if (top) point.y =  height - point.y;\n              return compute();\n            }\n          }\n      \n          if (alpha>A90) {\n            var beta = PI-alpha, dd = h - height/Math.sin(beta);\n            mv = point2D(Math.round(dd*Math.cos(beta)), Math.round(dd*Math.sin(beta)));\n            if (left) mv.x = - mv.x;\n            if (top) mv.y = - mv.y;\n          }\n\n          px = Math.round(tr.y/Math.tan(alpha) + tr.x);\n      \n          var side = width - px,\n            sideX = side*Math.cos(alpha*2),\n            sideY = side*Math.sin(alpha*2);\n            df = point2D(\n              Math.round((left ? side -sideX : px+sideX)),\n              Math.round((top) ? sideY : height - sideY));\n          \n        // Gradients\n          if (turnData.opts.gradients) {\n\n            gradientSize = side*Math.sin(alpha);\n\n            var endingPoint = flipMethods._c2.call(that, point.corner),\n             far = Math.sqrt(Math.pow(endingPoint.x-point.x, 2)+Math.pow(endingPoint.y-point.y, 2))/width;\n\n            shadowVal = Math.sin(A90*((far>1) ? 2 - far : far));\n\n            gradientOpacity = Math.min(far, 1);\n\n           \n              gradientStartVal = gradientSize>100 ? (gradientSize-100)/gradientSize : 0;\n\n              gradientEndPointA = point2D(\n                gradientSize*Math.sin(alpha)/width*100,\n                gradientSize*Math.cos(alpha)/height*100);\n           \n\n              if (flipMethods._backGradient.call(that)) {\n\n                gradientEndPointB = point2D(\n                  gradientSize*1.2*Math.sin(alpha)/width*100,\n                  gradientSize*1.2*Math.cos(alpha)/height*100);\n\n                if (!left) gradientEndPointB.x = 100-gradientEndPointB.x;\n                if (!top) gradientEndPointB.y = 100-gradientEndPointB.y;\n\n              }\n\n          }\n\n          tr.x = Math.round(tr.x);\n          tr.y = Math.round(tr.y);\n\n        return true;\n      },\n\n      transform = function(tr, c, x, a) {\n      \n        var f = ['0', 'auto'], mvW = (width-h)*x[0]/100, mvH = (height-h)*x[1]/100,\n          cssA = {left: f[c[0]], top: f[c[1]], right: f[c[2]], bottom: f[c[3]]},\n          cssB = {},\n          aliasingFk = (a!=90 && a!=-90) ? (left ? -1 : 1) : 0,\n          origin = x[0] + '% ' + x[1] + '%';\n\n        that.css(cssA).\n          transform(rotate(a) + translate(tr.x + aliasingFk, tr.y, ac), origin);\n\n        data.fpage.css(cssA).transform(\n          rotate(a) +\n          translate(tr.x + df.x - mv.x - width*x[0]/100, tr.y + df.y - mv.y - height*x[1]/100, ac) +\n          rotate((180/a - 2)*a),\n          origin);\n\n        data.wrapper.transform(translate(-tr.x + mvW-aliasingFk, -tr.y + mvH, ac) + rotate(-a), origin);\n\n        data.fwrapper.transform(translate(-tr.x + mv.x + mvW, -tr.y + mv.y + mvH, ac) + rotate(-a), origin);\n      \n        if (turnData.opts.gradients) {\n\n          if (x[0])\n            gradientEndPointA.x = 100-gradientEndPointA.x;\n\n          if (x[1])\n            gradientEndPointA.y = (100-gradientEndPointA.y);\n\n          cssB['box-shadow'] = '0 0 20px rgba(0,0,0,'+(0.5*shadowVal)+')';\n          folding.css(cssB);\n\n          gradient(data.ashadow,\n              point2D(left?100:0, top?0:100),\n              point2D(gradientEndPointA.x, gradientEndPointA.y),\n              [[gradientStartVal, 'rgba(0,0,0,0)'],\n              [((1-gradientStartVal)*0.8)+gradientStartVal, 'rgba(0,0,0,'+(0.2*gradientOpacity)+')'],\n              [1, 'rgba(255,255,255,'+(0.2*gradientOpacity)+')']],\n              3,\n              alpha);\n\n          if (flipMethods._backGradient.call(that))\n            gradient(data.bshadow,\n                point2D(left?0:100, top?0:100),\n                point2D(gradientEndPointB.x, gradientEndPointB.y),\n                [[0.6, 'rgba(0,0,0,0)'],\n                [0.8, 'rgba(0,0,0,'+(0.3*gradientOpacity)+')'],\n                [1, 'rgba(0,0,0,0)']\n                ],\n                3);\n        }\n\n      };\n\n      switch (point.corner) {\n        case 'l' :\n\n\n        break;\n        case 'r' :\n\n\n        break;\n        case 'tl' :\n          point.x = Math.max(point.x, 1);\n          compute();\n          transform(tr, [1,0,0,1], [100, 0], a);\n        break;\n        case 'tr' :\n          point.x = Math.min(point.x, width-1);\n          compute();\n          transform(point2D(-tr.x, tr.y), [0,0,0,1], [0, 0], -a);\n        break;\n        case 'bl' :\n          point.x = Math.max(point.x, 1);\n          compute();\n          transform(point2D(tr.x, -tr.y), [1,1,0,0], [100, 100], -a);\n        break;\n        case 'br' :\n          point.x = Math.min(point.x, width-1);\n          compute();\n          transform(point2D(-tr.x, -tr.y), [0,1,1,0], [0, 100], a);\n        break;\n      }\n\n    break;\n  }\n\n    data.point = point;\n  \n  },\n\n  _moveFoldingPage: function(move) {\n\n    var data = this.data().f;\n\n    if (!data)\n      return;\n\n    var turn = data.opts.turn,\n      turnData = turn.data(),\n      place = turnData.pagePlace;\n      \n    if (move) {\n\n      var nextPage = data.opts.next;\n  \n      if (place[nextPage]!=data.opts.page) {\n\n        if (data.folding)\n          flipMethods._moveFoldingPage.call(this, false);\n\n        var folding = flipMethods._foldingPage.call(this);\n        \n        folding.appendTo(data.fpage);\n        place[nextPage] = data.opts.page;\n        data.folding = nextPage;\n      }\n\n      turn.turn('update');\n\n    } else {\n\n      if (data.folding) {\n\n        if (turnData.pages[data.folding]) {\n         \n          // If we have flip available\n\n          var flipData = turnData.pages[data.folding].data().f;\n          \n          turnData.pageObjs[data.folding].\n            appendTo(flipData.wrapper);\n\n        } else if (turnData.pageWrap[data.folding]) {\n          \n          // If we have the pageWrapper\n\n          turnData.pageObjs[data.folding].\n            appendTo(turnData.pageWrap[data.folding]);\n\n        }\n\n        if (data.folding in place) {\n          place[data.folding] = data.folding;\n        }\n\n        delete data.folding;\n\n      }\n    }\n  },\n\n  _showFoldedPage: function(c, animate) {\n\n    var folding = flipMethods._foldingPage.call(this),\n      dd = this.data(),\n      data = dd.f,\n      visible = data.visible;\n\n    if (folding) {\n\n      if (!visible || !data.point || data.point.corner!=c.corner) {\n\n        var corner = (\n          data.status=='hover' ||\n          data.status=='peel' ||\n          data.opts.turn.data().mouseAction) ?\n        c.corner : null;\n\n        visible = false;\n\n        if (trigger('start', this, [data.opts, corner])=='prevented')\n          return false;\n\n      }\n\n      if (animate) {\n        \n        var that = this,\n          point = (data.point && data.point.corner==c.corner) ?\n          data.point : flipMethods._c.call(this, c.corner, 1);\n      \n        this.animatef({\n          from: [point.x, point.y],\n          to: [c.x, c.y],\n          duration: 500,\n          frame: function(v) {\n            c.x = Math.round(v[0]);\n            c.y = Math.round(v[1]);\n            flipMethods._fold.call(that, c);\n          }\n        });\n\n      } else  {\n\n        flipMethods._fold.call(this, c);\n\n        if (dd.effect && !dd.effect.turning)\n          this.animatef(false);\n\n      }\n\n      if (!visible) {\n\n        switch(data.effect) {\n          case 'hard':\n\n            data.visible = true;\n            flipMethods._moveFoldingPage.call(this, true);\n            data.fpage.show();\n            if (data.opts.shadows)\n              data.bshadow.show();\n\n          break;\n          case 'sheet':\n\n            data.visible = true;\n            data.fparent.show().data().flips++;\n            flipMethods._moveFoldingPage.call(this, true);\n            data.fwrapper.show();\n            if (data.bshadow)\n              data.bshadow.show();\n\n          break;\n        }\n\n      }\n\n      return true;\n\n    }\n\n    return false;\n  },\n\n  hide: function() {\n\n    var data = this.data().f,\n      turnData = data.opts.turn.data(),\n      folding = flipMethods._foldingPage.call(this);\n\n    switch (data.effect) {\n      case 'hard':\n        \n        if (turnData.opts.gradients) {\n          data.bshadowLoc = 0;\n          data.bshadow.remove();\n          data.ashadow.hide();\n        }\n\n        data.wrapper.transform('');\n        data.fpage.hide();\n\n      break;\n      case 'sheet':\n\n        if ((--data.fparent.data().flips)===0)\n          data.fparent.hide();\n\n        this.css({left: 0, top: 0, right: 'auto', bottom: 'auto'}).\n          transform('');\n\n        data.wrapper.transform('');\n\n        data.fwrapper.hide();\n\n        if (data.bshadow)\n          data.bshadow.hide();\n\n        folding.transform('');\n\n      break;\n    }\n\n      data.visible = false;\n\n    return this;\n  },\n\n  hideFoldedPage: function(animate) {\n\n    var data = this.data().f;\n\n    if (!data.point) return;\n\n    var that = this,\n      p1 = data.point,\n      hide = function() {\n        data.point = null;\n        data.status = '';\n        that.flip('hide');\n        that.trigger('end', [data.opts, false]);\n      };\n\n    if (animate) {\n\n      var p4 = flipMethods._c.call(this, p1.corner),\n        top = (p1.corner.substr(0,1)=='t'),\n        delta = (top) ? Math.min(0, p1.y-p4.y)/2 : Math.max(0, p1.y-p4.y)/2,\n        p2 = point2D(p1.x, p1.y+delta),\n        p3 = point2D(p4.x, p4.y-delta);\n    \n      this.animatef({\n        from: 0,\n        to: 1,\n        frame: function(v) {\n          var np = bezier(p1, p2, p3, p4, v);\n          p1.x = np.x;\n          p1.y = np.y;\n          flipMethods._fold.call(that, p1);\n        },\n        complete: hide,\n        duration: 800,\n        hiding: true\n      });\n\n    } else {\n\n      this.animatef(false);\n      hide();\n\n    }\n  },\n\n  turnPage: function(corner) {\n\n    var that = this,\n      data = this.data().f,\n      turnData = data.opts.turn.data();\n\n    corner = {corner: (data.corner) ?\n      data.corner.corner :\n      corner || flipMethods._cAllowed.call(this)[0]};\n\n    var p1 = data.point ||\n      flipMethods._c.call(this,\n        corner.corner,\n        (data.opts.turn) ? turnData.opts.elevation : 0),\n      p4 = flipMethods._c2.call(this, corner.corner);\n\n      this.trigger('flip').\n        animatef({\n          from: 0,\n          to: 1,\n          frame: function(v) {\n\n            var np = bezier(p1, p1, p4, p4, v);\n            corner.x = np.x;\n            corner.y = np.y;\n            flipMethods._showFoldedPage.call(that, corner);\n\n          },\n          complete: function() {\n            \n            that.trigger('end', [data.opts, true]);\n\n          },\n          duration: turnData.opts.duration,\n          turning: true\n        });\n\n      data.corner = null;\n  },\n\n  moving: function() {\n\n    return 'effect' in this.data();\n  \n  },\n\n  isTurning: function() {\n\n    return this.flip('moving') && this.data().effect.turning;\n  \n  },\n\n  corner: function() {\n    \n    return this.data().f.corner;\n      \n  },\n\n  _eventStart: function(e) {\n\n    var data = this.data().f,\n      turn = data.opts.turn;\n\n    if (!data.corner && !data.disabled && !this.flip('isTurning') &&\n      data.opts.page==turn.data().pagePlace[data.opts.page])\n    {\n\n      data.corner = flipMethods._isIArea.call(this, e);\n\n      if (data.corner && flipMethods._foldingPage.call(this)) {\n\n        this.trigger('pressed', [data.point]);\n        flipMethods._showFoldedPage.call(this, data.corner);\n\n        return false;\n\n      } else\n        data.corner = null;\n\n    }\n\n  },\n\n  _eventMove: function(e) {\n\n    var data = this.data().f;\n\n    if (!data.disabled) {\n\n      e = (isTouch) ? e.originalEvent.touches : [e];\n\n      if (data.corner) {\n\n        var pos = data.parent.offset();\n        data.corner.x = e[0].pageX-pos.left;\n        data.corner.y = e[0].pageY-pos.top;\n        flipMethods._showFoldedPage.call(this, data.corner);\n\n      } else if (data.hover && !this.data().effect && this.is(':visible')) {\n\n        var point = flipMethods._isIArea.call(this, e[0]);\n\n        if (point) {\n\n          if ((data.effect=='sheet' && point.corner.length==2)  || data.effect=='hard') {\n            data.status = 'hover';\n            var origin = flipMethods._c.call(this, point.corner, data.opts.cornerSize/2);\n            point.x = origin.x;\n            point.y = origin.y;\n            flipMethods._showFoldedPage.call(this, point, true);\n          }\n        \n        } else {\n          \n          if (data.status=='hover') {\n            data.status = '';\n            flipMethods.hideFoldedPage.call(this, true);\n          }\n\n        }\n\n      }\n\n    }\n\n  },\n\n  _eventEnd: function() {\n\n    var data = this.data().f,\n      corner = data.corner;\n\n    if (!data.disabled && corner) {\n      if (trigger('released', this, [data.point || corner])!='prevented') {\n        flipMethods.hideFoldedPage.call(this, true);\n      }\n    }\n\n    data.corner = null;\n\n  },\n\n  disable: function(disable) {\n\n    flipMethods.setData.call(this, {'disabled': disable});\n    return this;\n\n  },\n\n  hover: function(hover) {\n    \n    flipMethods.setData.call(this, {'hover': hover});\n    return this;\n\n  },\n\n  peel: function (corner, animate) {\n\n    var data = this.data().f;\n\n    if (corner) {\n\n      if ($.inArray(corner, corners.all)==-1)\n        throw turnError('Corner '+corner+' is not permitted');\n\n      if ($.inArray(corner, flipMethods._cAllowed.call(this))!=-1) {\n\n        var point = flipMethods._c.call(this, corner, data.opts.cornerSize/2);\n        \n        data.status = 'peel';\n\n        flipMethods._showFoldedPage.call(this,\n        {\n          corner: corner,\n          x: point.x,\n          y: point.y\n        }, animate);\n\n      }\n\n\n    } else {\n\n      data.status = '';\n\n      flipMethods.hideFoldedPage.call(this, animate);\n      \n    }\n\n    return this;\n  }\n};\n\n\n// Processes classes\n\nfunction dec(that, methods, args) {\n\n  if (!args[0] || typeof(args[0])=='object')\n    return methods.init.apply(that, args);\n\n  else if (methods[args[0]])\n    return methods[args[0]].apply(that, Array.prototype.slice.call(args, 1));\n\n  else\n    throw turnError(args[0] + ' is not a method or property');\n\n}\n\n\n// Attributes for a layer\n\nfunction divAtt(top, left, zIndex, overf) {\n    \n  return {'css': {\n    position: 'absolute',\n    top: top,\n    left: left,\n    'overflow': overf || 'hidden',\n    zIndex: zIndex || 'auto'\n  }\n};\n      \n}\n\n// Gets a 2D point from a bezier curve of four points\n\nfunction bezier(p1, p2, p3, p4, t) {\n\n  var a = 1 - t,\n    b = a * a * a,\n    c = t * t * t;\n    \n  return point2D(Math.round(b*p1.x + 3*t*a*a*p2.x + 3*t*t*a*p3.x + c*p4.x),\n    Math.round(b*p1.y + 3*t*a*a*p2.y + 3*t*t*a*p3.y + c*p4.y));\n\n}\n  \n// Converts an angle from degrees to radians\n\nfunction rad(degrees) {\n  \n  return degrees/180*PI;\n\n}\n\n// Converts an angle from radians to degrees\n\nfunction deg(radians) {\n  \n  return radians/PI*180;\n\n}\n\n// Gets a 2D point\n\nfunction point2D(x, y) {\n  \n  return {x: x, y: y};\n\n}\n\n// Webkit 534.3 on Android wrongly repaints elements that use overflow:hidden + rotation\n\nfunction rotationAvailable() {\n  var parts;\n\n  if ((parts = /AppleWebkit\\/([0-9\\.]+)/i.exec(navigator.userAgent))) {\n    var webkitVersion = parseFloat(parts[1]);\n    return (webkitVersion>534.3);\n  } else {\n    return true;\n  }\n}\n\n// Returns the traslate value\n\nfunction translate(x, y, use3d) {\n  \n  return (has3d && use3d) ? ' translate3d(' + x + 'px,' + y + 'px, 0px) '\n  : ' translate(' + x + 'px, ' + y + 'px) ';\n\n}\n\n// Returns the rotation value\n\nfunction rotate(degrees) {\n  \n  return ' rotate(' + degrees + 'deg) ';\n\n}\n\n// Checks if a property belongs to an object\n\nfunction has(property, object) {\n  \n  return Object.prototype.hasOwnProperty.call(object, property);\n\n}\n\n// Gets the CSS3 vendor prefix\n\nfunction getPrefix() {\n\n  var vendorPrefixes = ['Moz','Webkit','Khtml','O','ms'],\n  len = vendorPrefixes.length,\n  vendor = '';\n\n  while (len--)\n    if ((vendorPrefixes[len] + 'Transform') in document.body.style)\n      vendor='-'+vendorPrefixes[len].toLowerCase()+'-';\n\n  return vendor;\n\n}\n\n// Detects the transitionEnd Event\n\nfunction getTransitionEnd() {\n\n  var t,\n    el = document.createElement('fakeelement'),\n    transitions = {\n      'transition':'transitionend',\n      'OTransition':'oTransitionEnd',\n      'MSTransition':'transitionend',\n      'MozTransition':'transitionend',\n      'WebkitTransition':'webkitTransitionEnd'\n    };\n\n  for (t in transitions) {\n    if (el.style[t] !== undefined) {\n      return transitions[t];\n    }\n  }\n}\n\n// Gradients\n\nfunction gradient(obj, p0, p1, colors, numColors) {\n\n  var j, cols = [];\n\n  if (vendor=='-webkit-') {\n\n    for (j = 0; j<numColors; j++)\n      cols.push('color-stop('+colors[j][0]+', '+colors[j][1]+')');\n    \n    obj.css({'background-image':\n        '-webkit-gradient(linear, '+\n        p0.x+'% '+\n        p0.y+'%,'+\n        p1.x+'% '+\n        p1.y+'%, '+\n        cols.join(',') + ' )'});\n  } else {\n    \n    p0 = {x:p0.x/100 * obj.width(), y:p0.y/100 * obj.height()};\n    p1 = {x:p1.x/100 * obj.width(), y:p1.y/100 * obj.height()};\n\n    var dx = p1.x-p0.x,\n      dy = p1.y-p0.y,\n      angle = Math.atan2(dy, dx),\n      angle2 = angle - Math.PI/2,\n      diagonal = Math.abs(obj.width()*Math.sin(angle2))+Math.abs(obj.height()*Math.cos(angle2)),\n      gradientDiagonal = Math.sqrt(dy*dy + dx*dx),\n      corner = point2D((p1.x<p0.x) ? obj.width() : 0, (p1.y<p0.y) ? obj.height() : 0),\n      slope = Math.tan(angle),\n      inverse = -1/slope,\n      x = (inverse*corner.x - corner.y - slope*p0.x + p0.y)/(inverse-slope),\n      c = {x: x, y: inverse*x - inverse*corner.x + corner.y},\n      segA = (Math.sqrt( Math.pow(c.x-p0.x,2) + Math.pow(c.y-p0.y,2)));\n\n      for (j = 0; j<numColors; j++)\n        cols.push(' '+colors[j][1]+' '+((segA + gradientDiagonal*colors[j][0])*100/diagonal)+'%');\n\n      obj.css({'background-image': vendor+'linear-gradient(' + (-angle) + 'rad,' + cols.join(',') + ')'});\n  }\n}\n\n\n// Triggers an event\n\nfunction trigger(eventName, context, args) {\n\n  var event = $.Event(eventName);\n  context.trigger(event, args);\n  if (event.isDefaultPrevented())\n    return 'prevented';\n  else if (event.isPropagationStopped())\n    return 'stopped';\n  else\n    return '';\n}\n\n// JS Errors\n\nfunction turnError(message) {\n\n  function TurnJsError(message) {\n    this.name = \"TurnJsError\";\n    this.message = message;\n  }\n\n  TurnJsError.prototype = new Error();\n  TurnJsError.prototype.constructor = TurnJsError;\n  return new TurnJsError(message);\n\n}\n\n// Find the offset of an element ignoring its transformation\n\nfunction findPos(obj) {\n\n  var offset = {top: 0, left: 0};\n\n  do{\n    offset.left += obj.offsetLeft;\n    offset.top += obj.offsetTop;\n  } while ((obj = obj.offsetParent));\n\n  return offset;\n\n}\n\n// Checks if there's hard page compatibility\n// IE9 is the only browser that does not support hard pages\n\nfunction hasHardPage() {\n  return (navigator.userAgent.indexOf('MSIE 9.0')==-1);\n}\n\n// Request an animation\n\nwindow.requestAnim = (function() {\n  return window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(callback) {\n      window.setTimeout(callback, 1000 / 60);\n    };\n\n})();\n\n// Extend $.fn\n\n$.extend($.fn, {\n\n  flip: function() {\n    return dec($(this[0]), flipMethods, arguments);\n  },\n\n  turn: function() {\n    return dec($(this[0]), turnMethods, arguments);\n  },\n\n  transform: function(transform, origin) {\n\n    var properties = {};\n    \n    if (origin)\n      properties[vendor+'transform-origin'] = origin;\n    \n    properties[vendor+'transform'] = transform;\n  \n    return this.css(properties);\n\n  },\n\n  animatef: function(point) {\n\n    var data = this.data();\n\n    if (data.effect)\n      data.effect.stop();\n\n    if (point) {\n\n      if (!point.to.length) point.to = [point.to];\n      if (!point.from.length) point.from = [point.from];\n\n      var diff = [],\n        len = point.to.length,\n        animating = true,\n        that = this,\n        time = (new Date()).getTime(),\n        frame = function() {\n\n          if (!data.effect || !animating)\n            return;\n\n          var v = [],\n            timeDiff = Math.min(point.duration, (new Date()).getTime() - time);\n\n          for (var i = 0; i < len; i++)\n            v.push(data.effect.easing(1, timeDiff, point.from[i], diff[i], point.duration));\n\n          point.frame((len==1) ? v[0] : v);\n\n          if (timeDiff==point.duration) {\n            delete data['effect'];\n            that.data(data);\n            if (point.complete)\n              point.complete();\n          } else {\n            window.requestAnim(frame);\n          }\n        };\n\n      for (var i = 0; i < len; i++)\n        diff.push(point.to[i] - point.from[i]);\n\n      data.effect = $.extend({\n        stop: function() {\n          animating = false;\n        },\n        easing: function (x, t, b, c, data) {\n          return c * Math.sqrt(1 - (t=t/data-1)*t) + b;\n        }\n      }, point);\n\n      this.data(data);\n\n      frame();\n\n    } else {\n      \n      delete data['effect'];\n\n    }\n  }\n});\n\n// Export some globals\n\n$.isTouch = isTouch;\n$.mouseEvents = mouseEvents;\n$.cssPrefix = getPrefix;\n$.cssTransitionEnd = getTransitionEnd;\n$.findPos = findPos;\n\n})(jQuery);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}